-----BEGIN-----
-----SETTINGS-----
STRATEGY:feddf
MODEL_NAME:resnet8
NUM_CLIENTS:20
NUM_ROUNDS:30
FRACTION_FIT:0.4
FRACTION_EVALUATE:0.0
DATASET_NAME:cifar10
PARTITION_ALPHA:10.0
PARTITION_VAL_RATIO:0.1
BATCH_SIZE:512
LOCAL_EPOCHS:40
LOCAL_LR:0.05
DISTILL_BATCH_SIZE:512
SERVER_LR:0.005
SERVER_STEPS:500
SERVER_EARLY_STEPS:1000
USE_EARLY_STOPPING:False
USE_ADAPTIVE_LR:False
SEED:42
CUDA_DETERMINISTIC:False
USE_CROPS:True
IMG_NAME:ameyoko.jpg
DISTILL_DATASET:cifar100
DISTILL_ALPHA:1.0
NUM_DISTILL_IMAGES:20000
DISTILL_TRANSFORMS:v0
WARM_START:True
WARM_START_ROUNDS:1
WARM_START_INTERVAL:5
KMEANS_N_CLUSTER:20
KMEANS_HEURISTICS:easy
KMEANS_MIXED_FACTOR:50-50
CONFIDENCE_THRESHOLD:0.6
CLIPPING_FACTOR:2.5
-----SETTINGS END-----
-----EXPERIMENT BEGINS-----
---------
Generating crops for FedDF
Namespace(img_size=32, batch_size=32, num_imgs=100000, threads=18, vflip=False, deg=30, shear=30, cropfirst=True, initcrop=0.5, scale=[500, 1], randinterp=False, debug=False, imgpath='./static/single_images/ameyoko.jpg', targetpath='/scratch-local/sunnys.3126854/1690124928_446584233', seed=42, img_per_thread=5555)
will save 100000 patches in /scratch-local/sunnys.3126854/1690124928_446584233/single_img_crops/crops
100000 took 0.64min with 18 threads
---------
Simulating feddf training
INFO simulate 2023-07-23 17:09:41,326 | simulate.py:50 | Python script started : simulate.py
DEBUG simulate 2023-07-23 17:09:41,326 | simulate.py:55 | Reading args from argument parser
Downloading https://www.cs.toronto.edu/~kriz/cifar-10-python.tar.gz to /scratch-local/sunnys.3126854/1690124928_446584233/cifar-10-python.tar.gz
Extracting /scratch-local/sunnys.3126854/1690124928_446584233/cifar-10-python.tar.gz to /scratch-local/sunnys.3126854/1690124928_446584233
Generating unified cifar10 dataset
Class histogram for 0-th partition (alpha=10.0, 10 classes): [259 271 116 269 240 311 223 239 284 288]
INFO flwr 2023-07-23 17:12:34,289 | app.py:145 | Starting Flower simulation, config: ServerConfig(num_rounds=30, round_timeout=None)
2023-07-23 17:12:37,407	INFO worker.py:1529 -- Started a local Ray instance. View the dashboard at [1m[32m127.0.0.1:8266 [39m[22m
INFO flwr 2023-07-23 17:12:38,421 | app.py:179 | Flower VCE: Ray initialized with resources: {'object_store_memory': 61847529062.0, 'CPU': 18.0, 'GPU': 1.0, 'memory': 103079215104.0, 'accelerator_type:A100': 1.0, 'node:145.136.62.5': 1.0}
INFO flwr 2023-07-23 17:12:38,421 | server.py:86 | Initializing global parameters
INFO flwr 2023-07-23 17:12:38,421 | server.py:266 | Using initial parameters provided by strategy
INFO flwr 2023-07-23 17:12:38,421 | server.py:88 | Evaluating initial parameters
INFO flwr 2023-07-23 17:12:44,832 | server.py:91 | initial parameters (loss, other metrics): 2.3234217651367186, {'server_test_acc': 0.108}
INFO flwr 2023-07-23 17:12:44,833 | server.py:101 | FL starting
Cluster score for round 1 = 29085.044921875
INFO flwr 2023-07-23 17:12:52,625 | fed_df.py:194 | Number of selected crops : 20000
DEBUG flwr 2023-07-23 17:12:57,100 | server.py:215 | fit_round 1: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-07-23 17:14:19,438 | server.py:229 | fit_round 1 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3223097)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3223166)[0m malloc_consolidate(): invalid chunk size
[W] [17:12:52.826414] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3223097)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=3223165)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=3223166)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=3223167)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=3223236)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=3223235)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=3223305)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=3223304)[0m Fitting Client 14
Warm start at round 1
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3223165)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3223305)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3223304)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3223235)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3223236)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3223167)[0m double free or corruption (fasttop)
E0723 17:14:22.507834778 3204513 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 60000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.30209152060747146, val accuracy : 0.38652, best val accuracy : 0.4194
Average local training loss : 8.5630662240088
Average local training accuracy : 0.41035416666666663
INFO flwr 2023-07-23 17:15:06,334 | server.py:116 | fit progress: (1, 2.259220764160156, {'server_test_acc': 0.4208}, 141.5011042780243)
INFO flwr 2023-07-23 17:15:06,334 | server.py:163 | evaluate_round 1: no clients selected, cancel
Cluster score for round 2 = 206880.671875
INFO flwr 2023-07-23 17:15:14,741 | fed_df.py:194 | Number of selected crops : 7992
DEBUG flwr 2023-07-23 17:15:17,149 | server.py:215 | fit_round 2: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3444978)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:16:36,480 | server.py:229 | fit_round 2 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3444978)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=3445162)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=3445231)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3445234)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=3445232)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=3445302)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=3445608)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=3445609)[0m Fitting Client 13
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3445302)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3445608)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3445231)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3445162)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3445234)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3445232)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3445609)[0m double free or corruption (fasttop)
E0723 17:16:43.217372550 3364391 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 120000ms
E0723 17:17:23.253415620 3664641 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 240000ms
E0723 17:17:47.949061141 3665681 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 480000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.04942849599942565, val accuracy : 0.5005, best val accuracy : 0.5224
Average local training loss : 6.763946209289134
Average local training accuracy : 0.5969736111111111
INFO flwr 2023-07-23 17:17:54,027 | server.py:116 | fit progress: (2, 1.4317257690429688, {'server_test_acc': 0.5336}, 309.19402293796884)
INFO flwr 2023-07-23 17:17:54,027 | server.py:163 | evaluate_round 2: no clients selected, cancel
Cluster score for round 3 = 174003.96875
INFO flwr 2023-07-23 17:18:02,550 | fed_df.py:194 | Number of selected crops : 11545
DEBUG flwr 2023-07-23 17:18:05,599 | server.py:215 | fit_round 3: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3754131)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3754136)[0m corrupted size vs. prev_size in fastbins
[2m[36m(launch_and_fit pid=3754137)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3754135)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:19:26,496 | server.py:229 | fit_round 3 received 8 results and 0 failures
[W] [17:18:02.678171] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3754131)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=3754137)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=3754135)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3754136)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=3754295)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=3754307)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=3754294)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=3754308)[0m Fitting Client 6
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3754294)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3754307)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3754295)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3754308)[0m malloc_consolidate(): invalid chunk size
E0723 17:19:50.324389701 3711181 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 960000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.02189761843159795, val accuracy : 0.5189, best val accuracy : 0.5376
Average local training loss : 6.341657713986932
Average local training accuracy : 0.6405555555555555
INFO flwr 2023-07-23 17:20:29,118 | server.py:116 | fit progress: (3, 1.3640910522460938, {'server_test_acc': 0.5499}, 464.2852918599965)
INFO flwr 2023-07-23 17:20:29,118 | server.py:163 | evaluate_round 3: no clients selected, cancel
Cluster score for round 4 = 136229.515625
INFO flwr 2023-07-23 17:20:38,351 | fed_df.py:194 | Number of selected crops : 12502
DEBUG flwr 2023-07-23 17:20:41,752 | server.py:215 | fit_round 4: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=4026909)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4026932)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4027007)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:22:02,418 | server.py:229 | fit_round 4 received 8 results and 0 failures
[W] [17:20:38.484448] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=4026909)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=4026932)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=4027153)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=4027204)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=4027007)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=4027151)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=4027222)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=4027152)[0m Fitting Client 1
Performing server side distillation training...
[2m[36m(launch_and_fit pid=4027152)[0m malloc_consolidate(): invalid chunk size
E0723 17:22:03.334440280 3969498 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 1920000ms
[2m[36m(launch_and_fit pid=4027151)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=4027204)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4027153)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4027222)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.01702987532131374, val accuracy : 0.5486599999999999, best val accuracy : 0.5656
Average local training loss : 5.987643908709288
Average local training accuracy : 0.6782694444444445
INFO flwr 2023-07-23 17:23:03,926 | server.py:116 | fit progress: (4, 1.320542071533203, {'server_test_acc': 0.5713}, 619.0928090470261)
INFO flwr 2023-07-23 17:23:03,926 | server.py:163 | evaluate_round 4: no clients selected, cancel
Cluster score for round 5 = 120349.2421875
INFO flwr 2023-07-23 17:23:12,387 | fed_df.py:194 | Number of selected crops : 13951
DEBUG flwr 2023-07-23 17:23:15,940 | server.py:215 | fit_round 5: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=90325)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=90321)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:24:37,890 | server.py:229 | fit_round 5 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=90316)[0m double free or corruption (fasttop)
[W] [17:23:12.547438] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=90314)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=90317)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=90316)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=90321)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=90324)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=90325)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=90322)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=90323)[0m Fitting Client 14
Warm start at round 5
Performing server side distillation training...
[2m[36m(launch_and_fit pid=90314)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=90317)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=90317)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=90323)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=90324)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=90322)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.02835131056793034, val accuracy : 0.6347600000000001, best val accuracy : 0.6458
Average local training loss : 5.988290606811642
Average local training accuracy : 0.6782847222222224
INFO flwr 2023-07-23 17:25:36,410 | server.py:116 | fit progress: (5, 1.1838491577148438, {'server_test_acc': 0.639}, 771.5770033330191)
INFO flwr 2023-07-23 17:25:36,410 | server.py:163 | evaluate_round 5: no clients selected, cancel
Cluster score for round 6 = 39757.67578125
INFO flwr 2023-07-23 17:25:44,877 | fed_df.py:194 | Number of selected crops : 13648
DEBUG flwr 2023-07-23 17:25:48,328 | server.py:215 | fit_round 6: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=356434)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=356366)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=356364)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:27:08,885 | server.py:229 | fit_round 6 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=356516)[0m malloc_consolidate(): invalid chunk size
[W] [17:25:45.025169] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=356364)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=356366)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=356434)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=356435)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=356515)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=356516)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=356585)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=356584)[0m Fitting Client 14
Performing server side distillation training...
E0723 17:27:09.814802427  506718 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 3840000ms
[2m[36m(launch_and_fit pid=356515)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=356584)[0m corrupted size vs. prev_size in fastbins
[2m[36m(launch_and_fit pid=356585)[0m double free or corruption (fasttop)
Distillation training stopped at step number : 500
Average fusion training loss : 0.009407022595405578, val accuracy : 0.64268, best val accuracy : 0.651
Average local training loss : 4.7645735766738655
Average local training accuracy : 0.8100111111111111
INFO flwr 2023-07-23 17:28:10,492 | server.py:116 | fit progress: (6, 1.2671101440429688, {'server_test_acc': 0.6473}, 925.6589279129985)
INFO flwr 2023-07-23 17:28:10,492 | server.py:163 | evaluate_round 6: no clients selected, cancel
Cluster score for round 7 = 32156.08984375
INFO flwr 2023-07-23 17:28:18,849 | fed_df.py:194 | Number of selected crops : 14262
DEBUG flwr 2023-07-23 17:28:22,427 | server.py:215 | fit_round 7: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=616287)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:29:42,306 | server.py:229 | fit_round 7 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=616291)[0m malloc_consolidate(): invalid chunk size
[W] [17:28:19.000443] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=616287)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=616290)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=616312)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=616292)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=616291)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=616315)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=616313)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=616314)[0m Fitting Client 9
Performing server side distillation training...
[2m[36m(launch_and_fit pid=616313)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=616315)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=616290)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=616312)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=616314)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=616292)[0m double free or corruption (fasttop)
Distillation training stopped at step number : 500
Average fusion training loss : 0.005778411861043423, val accuracy : 0.6488400000000001, best val accuracy : 0.6634
Average local training loss : 4.669829309731721
Average local training accuracy : 0.8176722222222222
INFO flwr 2023-07-23 17:30:43,001 | server.py:116 | fit progress: (7, 1.2136792663574218, {'server_test_acc': 0.6514}, 1078.1678170320229)
INFO flwr 2023-07-23 17:30:43,001 | server.py:163 | evaluate_round 7: no clients selected, cancel
Cluster score for round 8 = 30928.466796875
INFO flwr 2023-07-23 17:30:51,411 | fed_df.py:194 | Number of selected crops : 15035
DEBUG flwr 2023-07-23 17:30:55,182 | server.py:215 | fit_round 8: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=875638)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=875778)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=875639)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=875775)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:32:15,754 | server.py:229 | fit_round 8 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=875640)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=875779)[0m malloc_consolidate(): invalid chunk size
[W] [17:30:51.568397] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=875638)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=875639)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=875640)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=875776)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=875775)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=875778)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=875779)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=875777)[0m Fitting Client 16
Performing server side distillation training...
E0723 17:32:17.344051655 1020800 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 7680000ms
[2m[36m(launch_and_fit pid=875777)[0m double free or corruption (fasttop)
Distillation training stopped at step number : 500
Average fusion training loss : 0.017141221510246395, val accuracy : 0.6622600000000001, best val accuracy : 0.6722
Average local training loss : 4.67073420137167
Average local training accuracy : 0.8181958333333333
INFO flwr 2023-07-23 17:33:14,080 | server.py:116 | fit progress: (8, 1.2369669677734374, {'server_test_acc': 0.6622}, 1229.247491733986)
INFO flwr 2023-07-23 17:33:14,081 | server.py:163 | evaluate_round 8: no clients selected, cancel
Cluster score for round 9 = 31420.716796875
INFO flwr 2023-07-23 17:33:22,521 | fed_df.py:194 | Number of selected crops : 13181
DEBUG flwr 2023-07-23 17:33:26,107 | server.py:215 | fit_round 9: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1149619)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1149613)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:34:48,740 | server.py:229 | fit_round 9 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1150133)[0m double free or corruption (fasttop)
[W] [17:33:22.672209] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1149613)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=1149619)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=1149909)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=1149913)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1149914)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=1150133)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1150131)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=1150132)[0m Fitting Client 6
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1149913)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1150131)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1149909)[0m double free or corruption (fasttop)
E0723 17:34:50.260937819 1022611 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 15360000ms
[2m[36m(launch_and_fit pid=1149914)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1150132)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.005936819858849049, val accuracy : 0.66666, best val accuracy : 0.6768
Average local training loss : 4.7195342121645805
Average local training accuracy : 0.8165972222222223
INFO flwr 2023-07-23 17:35:50,303 | server.py:116 | fit progress: (9, 1.2258037841796876, {'server_test_acc': 0.6622}, 1385.4700344449957)
INFO flwr 2023-07-23 17:35:50,303 | server.py:163 | evaluate_round 9: no clients selected, cancel
Cluster score for round 10 = 34919.3828125
INFO flwr 2023-07-23 17:35:58,803 | fed_df.py:194 | Number of selected crops : 13643
DEBUG flwr 2023-07-23 17:36:02,262 | server.py:215 | fit_round 10: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1423328)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:37:22,146 | server.py:229 | fit_round 10 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1423497)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1423501)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1423365)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1423498)[0m malloc_consolidate(): invalid chunk size
[W] [17:35:58.958287] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1423365)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1423328)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=1423497)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=1423498)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1423500)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=1423501)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=1423499)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=1423502)[0m Fitting Client 12
Warm start at round 10
Performing server side distillation training...
E0723 17:37:23.088987788 1325322 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 30720000ms
[2m[36m(launch_and_fit pid=1423500)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1423502)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1423499)[0m double free or corruption (fasttop)
Distillation training stopped at step number : 500
Average fusion training loss : 0.027345956875011325, val accuracy : 0.67366, best val accuracy : 0.6856
Average local training loss : 4.626910667680204
Average local training accuracy : 0.8239791666666667
INFO flwr 2023-07-23 17:38:22,091 | server.py:116 | fit progress: (10, 1.2400044830322265, {'server_test_acc': 0.6837}, 1537.2580536130117)
INFO flwr 2023-07-23 17:38:22,091 | server.py:163 | evaluate_round 10: no clients selected, cancel
Cluster score for round 11 = 19068.453125
INFO flwr 2023-07-23 17:38:30,508 | fed_df.py:194 | Number of selected crops : 13741
DEBUG flwr 2023-07-23 17:38:34,064 | server.py:215 | fit_round 11: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1648335)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1649018)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1649164)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:39:56,115 | server.py:229 | fit_round 11 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1648331)[0m double free or corruption (fasttop)
[W] [17:38:30.656880] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1648335)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1649018)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=1648331)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=1649179)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=1649164)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=1649309)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=1649017)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=1649310)[0m Fitting Client 0
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1649310)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1649179)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1649309)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1649017)[0m malloc_consolidate(): invalid chunk size
E0723 17:39:58.981874062 1833105 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 61440000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.005789554395712912, val accuracy : 0.7121600000000001, best val accuracy : 0.7164
Average local training loss : 4.231892402470112
Average local training accuracy : 0.8677055555555555
INFO flwr 2023-07-23 17:40:55,734 | server.py:116 | fit progress: (11, 1.112909051513672, {'server_test_acc': 0.7079}, 1690.9015934119816)
INFO flwr 2023-07-23 17:40:55,735 | server.py:163 | evaluate_round 11: no clients selected, cancel
Cluster score for round 12 = 23068.4140625
INFO flwr 2023-07-23 17:41:04,393 | fed_df.py:194 | Number of selected crops : 14164
DEBUG flwr 2023-07-23 17:41:07,959 | server.py:215 | fit_round 12: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1914884)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1914942)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1914941)[0m corrupted size vs. prev_size in fastbins
[2m[36m(launch_and_fit pid=1915014)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1914931)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1914932)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:42:30,889 | server.py:229 | fit_round 12 received 8 results and 0 failures
[W] [17:41:04.548086] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1914884)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1914942)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1915014)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=1914932)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=1914941)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=1914931)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=1914943)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=1915013)[0m Fitting Client 4
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1915013)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1914943)[0m malloc_consolidate(): invalid chunk size
E0723 17:42:33.680604020 1834531 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 122880000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.008892072542570531, val accuracy : 0.7104999999999999, best val accuracy : 0.7154
Average local training loss : 4.190419011190534
Average local training accuracy : 0.8693958333333333
INFO flwr 2023-07-23 17:43:29,849 | server.py:116 | fit progress: (12, 1.0793684051513672, {'server_test_acc': 0.711}, 1845.0160679320106)
INFO flwr 2023-07-23 17:43:29,849 | server.py:163 | evaluate_round 12: no clients selected, cancel
Cluster score for round 13 = 26680.798828125
INFO flwr 2023-07-23 17:43:38,443 | fed_df.py:194 | Number of selected crops : 13088
DEBUG flwr 2023-07-23 17:43:41,872 | server.py:215 | fit_round 13: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2176164)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2176304)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2176236)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:45:01,798 | server.py:229 | fit_round 13 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2176429)[0m double free or corruption (fasttop)
[W] [17:43:38.599452] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2176164)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=2176234)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=2176236)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=2176304)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=2176305)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=2176424)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=2176429)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=2176306)[0m Fitting Client 8
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2176234)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2176424)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2176305)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2176306)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.009709389122202993, val accuracy : 0.7015399999999999, best val accuracy : 0.7086
Average local training loss : 4.227766921184957
Average local training accuracy : 0.868951388888889
INFO flwr 2023-07-23 17:46:04,906 | server.py:116 | fit progress: (13, 1.1341424194335938, {'server_test_acc': 0.6988}, 2000.073153046018)
INFO flwr 2023-07-23 17:46:04,906 | server.py:163 | evaluate_round 13: no clients selected, cancel
Cluster score for round 14 = 31060.421875
INFO flwr 2023-07-23 17:46:13,534 | fed_df.py:194 | Number of selected crops : 12251
DEBUG flwr 2023-07-23 17:46:16,713 | server.py:215 | fit_round 14: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2439833)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2439696)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2439907)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:47:36,547 | server.py:229 | fit_round 14 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2439837)[0m malloc_consolidate(): invalid chunk size
[W] [17:46:13.672363] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2439696)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=2439837)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=2439905)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=2439836)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=2439833)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=2439906)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=2439835)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=2439907)[0m Fitting Client 12
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2439836)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2439835)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2439905)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2439906)[0m double free or corruption (fasttop)
E0723 17:47:41.867407377 2581021 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 245760000ms
E0723 17:47:47.701715491 2589108 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 491520000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.0066926186555065215, val accuracy : 0.68476, best val accuracy : 0.6934
Average local training loss : 4.125407367572188
Average local training accuracy : 0.8749458333333332
INFO flwr 2023-07-23 17:48:41,609 | server.py:116 | fit progress: (14, 1.1033536651611329, {'server_test_acc': 0.6929}, 2156.7758660649997)
INFO flwr 2023-07-23 17:48:41,609 | server.py:163 | evaluate_round 14: no clients selected, cancel
Cluster score for round 15 = 34301.3984375
INFO flwr 2023-07-23 17:48:50,641 | fed_df.py:194 | Number of selected crops : 12444
DEBUG flwr 2023-07-23 17:48:53,839 | server.py:215 | fit_round 15: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2730396)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2730708)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2731041)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:50:14,788 | server.py:229 | fit_round 15 received 8 results and 0 failures
[W] [17:48:50.775575] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2730396)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=2730395)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=2730708)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=2730678)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2730909)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=2731040)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2731172)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=2731041)[0m Fitting Client 11
Warm start at round 15
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2730395)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2731172)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2730909)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2731040)[0m double free or corruption (fasttop)
E0723 17:50:16.477413853 2897945 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 983040000ms
[2m[36m(launch_and_fit pid=2730678)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.020992685054428875, val accuracy : 0.69374, best val accuracy : 0.7134
Average local training loss : 4.175916179269552
Average local training accuracy : 0.8697666666666667
INFO flwr 2023-07-23 17:51:17,126 | server.py:116 | fit progress: (15, 1.2080915374755858, {'server_test_acc': 0.7104}, 2312.293676731002)
INFO flwr 2023-07-23 17:51:17,127 | server.py:163 | evaluate_round 15: no clients selected, cancel
E0723 17:51:19.067485714 2898083 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 1966080000ms
Cluster score for round 16 = 12148.1640625
INFO flwr 2023-07-23 17:51:25,625 | fed_df.py:194 | Number of selected crops : 14088
DEBUG flwr 2023-07-23 17:51:29,196 | server.py:215 | fit_round 16: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2989402)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:52:50,201 | server.py:229 | fit_round 16 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2989573)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2989543)[0m malloc_consolidate(): invalid chunk size
[W] [17:51:25.779297] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2989542)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2989402)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2989423)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=2989573)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=2989582)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=2989545)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=2989544)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=2989543)[0m Fitting Client 4
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2989423)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2989544)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2989582)[0m malloc_consolidate(): invalid chunk size
E0723 17:52:51.849460589 3163014 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=2989542)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2989545)[0m double free or corruption (fasttop)
E0723 17:53:39.238066249 3163193 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.008216516783460975, val accuracy : 0.7003, best val accuracy : 0.7052
Average local training loss : 3.818299260549247
Average local training accuracy : 0.9035555555555556
INFO flwr 2023-07-23 17:53:49,008 | server.py:116 | fit progress: (16, 1.1105732055664062, {'server_test_acc': 0.7036}, 2464.175476971024)
INFO flwr 2023-07-23 17:53:49,008 | server.py:163 | evaluate_round 16: no clients selected, cancel
Cluster score for round 17 = 18508.37109375
INFO flwr 2023-07-23 17:53:57,564 | fed_df.py:194 | Number of selected crops : 12701
DEBUG flwr 2023-07-23 17:54:00,933 | server.py:215 | fit_round 17: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3251345)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3251207)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:55:20,925 | server.py:229 | fit_round 17 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3251205)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3251415)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3251483)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3251484)[0m double free or corruption (fasttop)
[W] [17:53:57.731734] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3251205)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=3251207)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=3251345)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=3251413)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3251415)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=3251414)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=3251483)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=3251484)[0m Fitting Client 18
Performing server side distillation training...
E0723 17:55:21.787286712 3227852 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=3251414)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3251413)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.007073754090815783, val accuracy : 0.67058, best val accuracy : 0.6792
Average local training loss : 3.809404218383133
Average local training accuracy : 0.904086111111111
INFO flwr 2023-07-23 17:56:23,787 | server.py:116 | fit progress: (17, 1.1132693298339844, {'server_test_acc': 0.6812}, 2618.954741146008)
INFO flwr 2023-07-23 17:56:23,788 | server.py:163 | evaluate_round 17: no clients selected, cancel
Cluster score for round 18 = 24746.16015625
INFO flwr 2023-07-23 17:56:32,503 | fed_df.py:194 | Number of selected crops : 12587
DEBUG flwr 2023-07-23 17:56:35,836 | server.py:215 | fit_round 18: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3512333)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:57:56,261 | server.py:229 | fit_round 18 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3512856)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3512857)[0m malloc_consolidate(): invalid chunk size
[W] [17:56:32.653630] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3512333)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=3512736)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=3512737)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=3512857)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=3512611)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=3512856)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3512873)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=3512874)[0m Fitting Client 1
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3512737)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3512611)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3512873)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3512736)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3512874)[0m malloc_consolidate(): invalid chunk size
E0723 17:57:59.920048535 3384762 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.009129842459224165, val accuracy : 0.7197999999999999, best val accuracy : 0.7268
Average local training loss : 3.9337231028825044
Average local training accuracy : 0.8942583333333333
INFO flwr 2023-07-23 17:58:58,981 | server.py:116 | fit progress: (18, 1.0398184539794921, {'server_test_acc': 0.7201}, 2774.148318270978)
INFO flwr 2023-07-23 17:58:58,981 | server.py:163 | evaluate_round 18: no clients selected, cancel
Cluster score for round 19 = 25358.421875
INFO flwr 2023-07-23 17:59:07,643 | fed_df.py:194 | Number of selected crops : 11973
DEBUG flwr 2023-07-23 17:59:10,768 | server.py:215 | fit_round 19: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3756515)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:00:30,710 | server.py:229 | fit_round 19 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3756783)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3756782)[0m double free or corruption (fasttop)
[W] [17:59:07.778985] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3756515)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=3756782)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3756784)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=3756953)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=3756783)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=3756785)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=3756954)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=3756919)[0m Fitting Client 1
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3756785)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3756784)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3756954)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3756919)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3756953)[0m malloc_consolidate(): invalid chunk size
E0723 18:00:32.649278106 3915232 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:00:32.649385872 3915232 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:00:32.649398540 3915232 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:00:32.649409160 3915232 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.007455409738235176, val accuracy : 0.71226, best val accuracy : 0.719
Average local training loss : 3.866566452011466
Average local training accuracy : 0.9008277777777778
INFO flwr 2023-07-23 18:01:34,688 | server.py:116 | fit progress: (19, 1.0299737426757813, {'server_test_acc': 0.7078}, 2929.855677246989)
INFO flwr 2023-07-23 18:01:34,689 | server.py:163 | evaluate_round 19: no clients selected, cancel
Cluster score for round 20 = 36154.1171875
INFO flwr 2023-07-23 18:01:43,382 | fed_df.py:194 | Number of selected crops : 11439
DEBUG flwr 2023-07-23 18:01:46,472 | server.py:215 | fit_round 20: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=4003793)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 18:03:06,642 | server.py:229 | fit_round 20 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=4003907)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=4004183)[0m malloc_consolidate(): invalid chunk size
[W] [18:01:43.508911] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=4003793)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=4003906)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=4003907)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=4004185)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=4004184)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=4004186)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=4004183)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=4004182)[0m Fitting Client 19
Warm start at round 20
Performing server side distillation training...
[2m[36m(launch_and_fit pid=4003906)[0m malloc_consolidate(): invalid chunk size
E0723 18:03:07.587594489 4175974 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=4004185)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4004182)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4004184)[0m malloc_consolidate(): invalid chunk size
E0723 18:03:45.780676542   34557 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.01778675520978868, val accuracy : 0.7152200000000001, best val accuracy : 0.7316
Average local training loss : 3.912581123411655
Average local training accuracy : 0.8949291666666667
INFO flwr 2023-07-23 18:04:10,792 | server.py:116 | fit progress: (20, 1.2206314300537109, {'server_test_acc': 0.7274}, 3085.959446005989)
INFO flwr 2023-07-23 18:04:10,793 | server.py:163 | evaluate_round 20: no clients selected, cancel
Cluster score for round 21 = 9174.732421875
INFO flwr 2023-07-23 18:04:19,459 | fed_df.py:194 | Number of selected crops : 13572
DEBUG flwr 2023-07-23 18:04:22,895 | server.py:215 | fit_round 21: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=94496)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 18:05:44,725 | server.py:229 | fit_round 21 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=94759)[0m double free or corruption (fasttop)
[W] [18:04:19.617480] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=94264)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=94496)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=94661)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=94761)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=94759)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=94267)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=94498)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=94760)[0m Fitting Client 18
Performing server side distillation training...
[2m[36m(launch_and_fit pid=94267)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=94498)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=94264)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=94761)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=94661)[0m malloc_consolidate(): invalid chunk size
E0723 18:05:46.698034397  298747 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=94760)[0m double free or corruption (fasttop)
Distillation training stopped at step number : 500
Average fusion training loss : 0.006056344839278608, val accuracy : 0.7327600000000001, best val accuracy : 0.7394
Average local training loss : 3.80628645773977
Average local training accuracy : 0.907701388888889
INFO flwr 2023-07-23 18:06:44,141 | server.py:116 | fit progress: (21, 1.0847910919189454, {'server_test_acc': 0.7348}, 3239.3082050569938)
INFO flwr 2023-07-23 18:06:44,141 | server.py:163 | evaluate_round 21: no clients selected, cancel
Cluster score for round 22 = 14097.287109375
INFO flwr 2023-07-23 18:06:52,671 | fed_df.py:194 | Number of selected crops : 14066
DEBUG flwr 2023-07-23 18:06:56,225 | server.py:215 | fit_round 22: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=382978)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=383117)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:08:17,904 | server.py:229 | fit_round 22 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=383116)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=382979)[0m malloc_consolidate(): invalid chunk size
[W] [18:06:52.823698] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=382978)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=382980)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=383048)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=382979)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=383116)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=383117)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=383119)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=383118)[0m Fitting Client 15
Performing server side distillation training...
[2m[36m(launch_and_fit pid=383048)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=382980)[0m double free or corruption (fasttop)
E0723 18:08:18.951846630  299155 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=383119)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=383118)[0m double free or corruption (fasttop)
Distillation training stopped at step number : 500
Average fusion training loss : 0.00976691356021911, val accuracy : 0.72652, best val accuracy : 0.7312
Average local training loss : 3.7284467451274392
Average local training accuracy : 0.9108694444444445
INFO flwr 2023-07-23 18:09:17,211 | server.py:116 | fit progress: (22, 1.0591542419433593, {'server_test_acc': 0.7273}, 3392.378120551002)
INFO flwr 2023-07-23 18:09:17,211 | server.py:163 | evaluate_round 22: no clients selected, cancel
Cluster score for round 23 = 17160.380859375
INFO flwr 2023-07-23 18:09:25,673 | fed_df.py:194 | Number of selected crops : 13075
DEBUG flwr 2023-07-23 18:09:29,152 | server.py:215 | fit_round 23: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=640980)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=641119)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=640979)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:10:49,166 | server.py:229 | fit_round 23 received 8 results and 0 failures
[W] [18:09:25.817271] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=640980)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=640979)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=641050)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=641049)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=641118)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=641189)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=641188)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=641119)[0m Fitting Client 11
Performing server side distillation training...
[2m[36m(launch_and_fit pid=641188)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=641049)[0m corrupted size vs. prev_size in fastbins
[2m[36m(launch_and_fit pid=641189)[0m corrupted size vs. prev_size in fastbins
[2m[36m(launch_and_fit pid=641118)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=641050)[0m malloc_consolidate(): invalid chunk size
E0723 18:10:51.289943444  781977 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:10:51.290015431  781977 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:10:51.290026693  781977 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:10:51.290035460  781977 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.009603610486723483, val accuracy : 0.7253000000000001, best val accuracy : 0.7326
Average local training loss : 3.8362396085634827
Average local training accuracy : 0.9030888888888889
INFO flwr 2023-07-23 18:11:52,646 | server.py:116 | fit progress: (23, 1.0487313079833984, {'server_test_acc': 0.7332}, 3547.813150645001)
INFO flwr 2023-07-23 18:11:52,646 | server.py:163 | evaluate_round 23: no clients selected, cancel
Cluster score for round 24 = 22500.5546875
INFO flwr 2023-07-23 18:12:01,186 | fed_df.py:194 | Number of selected crops : 12189
DEBUG flwr 2023-07-23 18:12:04,409 | server.py:215 | fit_round 24: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=902584)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=902437)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 18:13:24,281 | server.py:229 | fit_round 24 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=902298)[0m malloc_consolidate(): invalid chunk size
[W] [18:12:01.320931] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=902298)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=902437)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=902367)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=902513)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=902583)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=902584)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=902582)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=902581)[0m Fitting Client 14
Performing server side distillation training...
[2m[36m(launch_and_fit pid=902582)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=902367)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=902513)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=902583)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=902581)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=902581)[0m malloc_consolidate(): invalid chunk size
E0723 18:13:28.947797419 1039377 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.007480175608769059, val accuracy : 0.7277600000000001, best val accuracy : 0.7402
Average local training loss : 3.829137392155826
Average local training accuracy : 0.9045305555555555
INFO flwr 2023-07-23 18:14:30,373 | server.py:116 | fit progress: (24, 0.9967116760253907, {'server_test_acc': 0.7337}, 3705.540325483016)
INFO flwr 2023-07-23 18:14:30,373 | server.py:163 | evaluate_round 24: no clients selected, cancel
Cluster score for round 25 = 22828.775390625
INFO flwr 2023-07-23 18:14:39,302 | fed_df.py:194 | Number of selected crops : 12234
DEBUG flwr 2023-07-23 18:14:42,473 | server.py:215 | fit_round 25: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1163247)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1163393)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:16:03,904 | server.py:229 | fit_round 25 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1163259)[0m double free or corruption (fasttop)
[W] [18:14:39.444929] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1163245)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=1163247)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1163391)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=1163254)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=1163255)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=1163253)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1163259)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=1163393)[0m Fitting Client 13
Warm start at round 25
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1163254)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1163245)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1163253)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1163255)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1163391)[0m malloc_consolidate(): invalid chunk size
E0723 18:16:07.255775396 1040229 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.03344465701282024, val accuracy : 0.7214, best val accuracy : 0.7342
Average local training loss : 3.744210227765143
Average local training accuracy : 0.9097625
INFO flwr 2023-07-23 18:17:07,824 | server.py:116 | fit progress: (25, 1.426519515991211, {'server_test_acc': 0.7315}, 3862.9915586059797)
INFO flwr 2023-07-23 18:17:07,825 | server.py:163 | evaluate_round 25: no clients selected, cancel
Cluster score for round 26 = 2387.907470703125
INFO flwr 2023-07-23 18:17:16,339 | fed_df.py:194 | Number of selected crops : 15062
DEBUG flwr 2023-07-23 18:17:20,194 | server.py:215 | fit_round 26: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1405622)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1405901)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1405756)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:18:40,763 | server.py:229 | fit_round 26 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1405896)[0m malloc_consolidate(): invalid chunk size
[W] [18:17:16.504417] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1405622)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=1405756)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=1405615)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=1405901)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=1405897)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1405762)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=1405757)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=1405896)[0m Fitting Client 19
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1405897)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1405615)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1405757)[0m malloc_consolidate(): invalid chunk size
E0723 18:18:42.206070301 1568903 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=1405762)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.02644659435003996, val accuracy : 0.7153200000000001, best val accuracy : 0.723
Average local training loss : 3.6370003866031766
Average local training accuracy : 0.9200416666666668
INFO flwr 2023-07-23 18:19:39,285 | server.py:116 | fit progress: (26, 1.299585968017578, {'server_test_acc': 0.7182}, 4014.452784846013)
INFO flwr 2023-07-23 18:19:39,286 | server.py:163 | evaluate_round 26: no clients selected, cancel
Cluster score for round 27 = 3523.83349609375
INFO flwr 2023-07-23 18:19:47,981 | fed_df.py:194 | Number of selected crops : 14359
DEBUG flwr 2023-07-23 18:19:51,660 | server.py:215 | fit_round 27: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1680911)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:21:12,231 | server.py:229 | fit_round 27 received 8 results and 0 failures
[W] [18:19:48.136715] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1680761)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=1680910)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=1680843)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1680911)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=1681070)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=1681071)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=1681072)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=1681073)[0m Fitting Client 6
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1680761)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1680843)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1681072)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1681071)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1680910)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1681073)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1681070)[0m malloc_consolidate(): invalid chunk size
E0723 18:21:15.056479556 1569175 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.016427135845646264, val accuracy : 0.7431400000000001, best val accuracy : 0.7496
Average local training loss : 3.684258394129574
Average local training accuracy : 0.9160194444444445
INFO flwr 2023-07-23 18:22:11,383 | server.py:116 | fit progress: (27, 1.2711563537597657, {'server_test_acc': 0.746}, 4166.550561907992)
INFO flwr 2023-07-23 18:22:11,384 | server.py:163 | evaluate_round 27: no clients selected, cancel
Cluster score for round 28 = 4481.142578125
INFO flwr 2023-07-23 18:22:19,992 | fed_df.py:194 | Number of selected crops : 14832
DEBUG flwr 2023-07-23 18:22:23,780 | server.py:215 | fit_round 28: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1954945)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1954954)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:23:45,206 | server.py:229 | fit_round 28 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1954949)[0m corrupted size vs. prev_size in fastbins
[W] [18:22:20.156742] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1954945)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1954949)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=1954948)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=1954950)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1954953)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1954952)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=1954951)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=1954954)[0m Fitting Client 13
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1954948)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1954953)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1954950)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1954951)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1954952)[0m double free or corruption (fasttop)
E0723 18:23:47.179478885 2124000 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:23:47.179636942 2124000 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:23:47.179650755 2124000 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:23:47.179661867 2124000 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:23:47.179670773 2124000 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.010462050466798246, val accuracy : 0.73622, best val accuracy : 0.7434
Average local training loss : 3.698732830397785
Average local training accuracy : 0.9159527777777777
INFO flwr 2023-07-23 18:24:45,966 | server.py:116 | fit progress: (28, 1.2188008270263673, {'server_test_acc': 0.7385}, 4321.1330840520095)
INFO flwr 2023-07-23 18:24:45,966 | server.py:163 | evaluate_round 28: no clients selected, cancel
Cluster score for round 29 = 5459.3935546875
INFO flwr 2023-07-23 18:24:54,568 | fed_df.py:194 | Number of selected crops : 14929
DEBUG flwr 2023-07-23 18:24:58,373 | server.py:215 | fit_round 29: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2216184)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:26:18,553 | server.py:229 | fit_round 29 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2215975)[0m malloc_consolidate(): invalid chunk size
[W] [18:24:54.739329] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2215977)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=2215975)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=2215978)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=2216114)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=2216116)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=2216115)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=2216184)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=2216185)[0m Fitting Client 19
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2215977)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2216114)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2216185)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2215978)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2216116)[0m malloc_consolidate(): invalid chunk size
E0723 18:26:20.253370436 2124319 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=2216115)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.01226422630622983, val accuracy : 0.7269, best val accuracy : 0.7314
Average local training loss : 3.7018712451681495
Average local training accuracy : 0.9143583333333334
INFO flwr 2023-07-23 18:27:17,203 | server.py:116 | fit progress: (29, 1.1514326049804688, {'server_test_acc': 0.7325}, 4472.3706155020045)
INFO flwr 2023-07-23 18:27:17,204 | server.py:163 | evaluate_round 29: no clients selected, cancel
Cluster score for round 30 = 6868.5302734375
INFO flwr 2023-07-23 18:27:25,785 | fed_df.py:194 | Number of selected crops : 14680
DEBUG flwr 2023-07-23 18:27:29,507 | server.py:215 | fit_round 30: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2472581)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2472512)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2472582)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 18:28:49,927 | server.py:229 | fit_round 30 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2472786)[0m malloc_consolidate(): invalid chunk size
[W] [18:27:25.946191] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2472512)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2472581)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=2472582)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2472718)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=2472786)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=2472788)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=2472789)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=2472787)[0m Fitting Client 9
Warm start at round 30
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2472787)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2472788)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2472789)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2472718)[0m malloc_consolidate(): invalid chunk size
E0723 18:28:51.665662619 2364797 chttp2_transport.cc:1079]             ipv4:145.136.62.5:48211: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.030862074160948397, val accuracy : 0.7167399999999999, best val accuracy : 0.7254
Average local training loss : 3.5933878121897584
Average local training accuracy : 0.9224083333333333
INFO flwr 2023-07-23 18:29:50,527 | server.py:116 | fit progress: (30, 1.4294889007568359, {'server_test_acc': 0.727}, 4625.694609939994)
INFO flwr 2023-07-23 18:29:50,528 | server.py:163 | evaluate_round 30: no clients selected, cancel
INFO flwr 2023-07-23 18:29:50,528 | server.py:144 | FL finished in 4625.694988432981
INFO flwr 2023-07-23 18:29:50,528 | app.py:202 | app_fit: losses_distributed []
INFO flwr 2023-07-23 18:29:50,529 | app.py:203 | app_fit: metrics_distributed {}
INFO flwr 2023-07-23 18:29:50,529 | app.py:204 | app_fit: losses_centralized [(0, 2.3234217651367186), (1, 2.259220764160156), (2, 1.4317257690429688), (3, 1.3640910522460938), (4, 1.320542071533203), (5, 1.1838491577148438), (6, 1.2671101440429688), (7, 1.2136792663574218), (8, 1.2369669677734374), (9, 1.2258037841796876), (10, 1.2400044830322265), (11, 1.112909051513672), (12, 1.0793684051513672), (13, 1.1341424194335938), (14, 1.1033536651611329), (15, 1.2080915374755858), (16, 1.1105732055664062), (17, 1.1132693298339844), (18, 1.0398184539794921), (19, 1.0299737426757813), (20, 1.2206314300537109), (21, 1.0847910919189454), (22, 1.0591542419433593), (23, 1.0487313079833984), (24, 0.9967116760253907), (25, 1.426519515991211), (26, 1.299585968017578), (27, 1.2711563537597657), (28, 1.2188008270263673), (29, 1.1514326049804688), (30, 1.4294889007568359)]
INFO flwr 2023-07-23 18:29:50,529 | app.py:205 | app_fit: metrics_centralized {'server_test_acc': [(0, 0.108), (1, 0.4208), (2, 0.5336), (3, 0.5499), (4, 0.5713), (5, 0.639), (6, 0.6473), (7, 0.6514), (8, 0.6622), (9, 0.6622), (10, 0.6837), (11, 0.7079), (12, 0.711), (13, 0.6988), (14, 0.6929), (15, 0.7104), (16, 0.7036), (17, 0.6812), (18, 0.7201), (19, 0.7078), (20, 0.7274), (21, 0.7348), (22, 0.7273), (23, 0.7332), (24, 0.7337), (25, 0.7315), (26, 0.7182), (27, 0.746), (28, 0.7385), (29, 0.7325), (30, 0.727)]}
malloc_consolidate(): invalid chunk size
srun: error: gcn5: task 0: Aborted
srun: Terminating StepId=3126854.1
-----EXPERIMENT ENDS-----
-----CLEANING UP DISK------
-----END-----

JOB STATISTICS
==============
Job ID: 3126854
Cluster: snellius
User/Group: sunnys/sunnys
State: RUNNING
Nodes: 1
Cores per node: 18
CPU Utilized: 02:42:14
CPU Efficiency: 10.95% of 1-00:42:00 core-walltime
Job Wall-clock time: 01:22:20
Memory Utilized: 68.33 GB
Memory Efficiency: 56.94% of 120.00 GB
WARNING: Efficiency statistics may be misleading for RUNNING jobs.
