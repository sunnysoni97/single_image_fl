-----BEGIN-----
-----SETTINGS-----
STRATEGY:feddf
MODEL_NAME:resnet8
NUM_CLIENTS:20
NUM_ROUNDS:30
FRACTION_FIT:0.4
FRACTION_EVALUATE:0.0
DATASET_NAME:cifar10
PARTITION_ALPHA:10.0
PARTITION_VAL_RATIO:0.1
BATCH_SIZE:512
LOCAL_EPOCHS:40
LOCAL_LR:0.05
DISTILL_BATCH_SIZE:512
SERVER_LR:0.005
SERVER_STEPS:500
SERVER_EARLY_STEPS:1000
USE_EARLY_STOPPING:False
USE_ADAPTIVE_LR:False
SEED:42
CUDA_DETERMINISTIC:False
USE_CROPS:True
IMG_NAME:ameyoko.jpg
DISTILL_DATASET:cifar100
DISTILL_ALPHA:1.0
NUM_DISTILL_IMAGES:20000
DISTILL_TRANSFORMS:v0
WARM_START:True
WARM_START_ROUNDS:1
WARM_START_INTERVAL:5
KMEANS_N_CLUSTER:20
KMEANS_HEURISTICS:easy
KMEANS_MIXED_FACTOR:50-50
CONFIDENCE_THRESHOLD:0.7
CLIPPING_FACTOR:2.5
-----SETTINGS END-----
-----EXPERIMENT BEGINS-----
---------
Generating crops for FedDF
Namespace(img_size=32, batch_size=32, num_imgs=100000, threads=18, vflip=False, deg=30, shear=30, cropfirst=True, initcrop=0.5, scale=[500, 1], randinterp=False, debug=False, imgpath='./static/single_images/ameyoko.jpg', targetpath='/scratch-local/sunnys.3126855/1690124928_828189029', seed=42, img_per_thread=5555)
will save 100000 patches in /scratch-local/sunnys.3126855/1690124928_828189029/single_img_crops/crops
100000 took 0.68min with 18 threads
---------
Simulating feddf training
INFO simulate 2023-07-23 17:09:46,682 | simulate.py:50 | Python script started : simulate.py
DEBUG simulate 2023-07-23 17:09:46,682 | simulate.py:55 | Reading args from argument parser
Downloading https://www.cs.toronto.edu/~kriz/cifar-10-python.tar.gz to /scratch-local/sunnys.3126855/1690124928_828189029/cifar-10-python.tar.gz
Extracting /scratch-local/sunnys.3126855/1690124928_828189029/cifar-10-python.tar.gz to /scratch-local/sunnys.3126855/1690124928_828189029
Generating unified cifar10 dataset
Class histogram for 0-th partition (alpha=10.0, 10 classes): [259 271 116 269 240 311 223 239 284 288]
INFO flwr 2023-07-23 17:10:24,623 | app.py:145 | Starting Flower simulation, config: ServerConfig(num_rounds=30, round_timeout=None)
2023-07-23 17:10:27,046	INFO worker.py:1529 -- Started a local Ray instance. View the dashboard at [1m[32m127.0.0.1:8266 [39m[22m
INFO flwr 2023-07-23 17:10:28,633 | app.py:179 | Flower VCE: Ray initialized with resources: {'accelerator_type:A100': 1.0, 'node:145.136.62.6': 1.0, 'object_store_memory': 61847529062.0, 'memory': 103079215104.0, 'GPU': 1.0, 'CPU': 18.0}
INFO flwr 2023-07-23 17:10:28,634 | server.py:86 | Initializing global parameters
INFO flwr 2023-07-23 17:10:28,634 | server.py:266 | Using initial parameters provided by strategy
INFO flwr 2023-07-23 17:10:28,634 | server.py:88 | Evaluating initial parameters
INFO flwr 2023-07-23 17:10:35,991 | server.py:91 | initial parameters (loss, other metrics): 2.3234217651367186, {'server_test_acc': 0.108}
INFO flwr 2023-07-23 17:10:35,991 | server.py:101 | FL starting
Cluster score for round 1 = 29085.0546875
INFO flwr 2023-07-23 17:10:43,796 | fed_df.py:194 | Number of selected crops : 20000
DEBUG flwr 2023-07-23 17:10:48,347 | server.py:215 | fit_round 1: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2327505)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2327515)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:12:17,226 | server.py:229 | fit_round 1 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2327506)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2327512)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2327507)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2327516)[0m double free or corruption (fasttop)
[W] [17:10:44.004114] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2327505)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=2327506)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=2327507)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=2327512)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=2327514)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=2327513)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=2327516)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=2327515)[0m Fitting Client 13
Warm start at round 1
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2327513)[0m malloc_consolidate(): invalid chunk size
E0723 17:12:18.887780127 2531835 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 60000ms
[2m[36m(launch_and_fit pid=2327514)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.306577523201704, val accuracy : 0.37385999999999997, best val accuracy : 0.396
Average local training loss : 8.62800018005073
Average local training accuracy : 0.4023541666666667
INFO flwr 2023-07-23 17:13:06,495 | server.py:116 | fit progress: (1, 2.372212274169922, {'server_test_acc': 0.4024}, 150.5039005560102)
INFO flwr 2023-07-23 17:13:06,495 | server.py:163 | evaluate_round 1: no clients selected, cancel
Cluster score for round 2 = 201763.765625
INFO flwr 2023-07-23 17:13:15,050 | fed_df.py:194 | Number of selected crops : 9267
DEBUG flwr 2023-07-23 17:13:17,651 | server.py:215 | fit_round 2: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2620698)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:14:41,547 | server.py:229 | fit_round 2 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2620700)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2620701)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2620698)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=2620700)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=2620701)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=2620704)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2620702)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=2620703)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=2620706)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=2620705)[0m Fitting Client 15
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2620702)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2620706)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2620705)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2620704)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2620703)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.05991697967797518, val accuracy : 0.45360000000000006, best val accuracy : 0.495
Average local training loss : 6.866581460274755
Average local training accuracy : 0.5822486111111111
INFO flwr 2023-07-23 17:15:57,091 | server.py:116 | fit progress: (2, 1.4725686431884766, {'server_test_acc': 0.5014}, 321.0995004840079)
INFO flwr 2023-07-23 17:15:57,091 | server.py:163 | evaluate_round 2: no clients selected, cancel
Cluster score for round 3 = 140513.53125
INFO flwr 2023-07-23 17:16:05,751 | fed_df.py:194 | Number of selected crops : 13768
DEBUG flwr 2023-07-23 17:16:09,306 | server.py:215 | fit_round 3: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2899661)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2899928)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2899933)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2899932)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:17:31,446 | server.py:229 | fit_round 3 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2899934)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2899927)[0m double free or corruption (fasttop)
[W] [17:16:05.897679] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2899661)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=2899928)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=2899927)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=2899933)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=2899793)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2899932)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=2899929)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=2899934)[0m Fitting Client 0
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2899929)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2899793)[0m double free or corruption (fasttop)
E0723 17:17:34.929546938 2804862 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 120000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.03711460505798459, val accuracy : 0.5114799999999999, best val accuracy : 0.5304
Average local training loss : 6.487952881678939
Average local training accuracy : 0.6272430555555557
INFO flwr 2023-07-23 17:18:35,178 | server.py:116 | fit progress: (3, 1.4482104736328125, {'server_test_acc': 0.5337}, 479.18716392398346)
INFO flwr 2023-07-23 17:18:35,179 | server.py:163 | evaluate_round 3: no clients selected, cancel
Cluster score for round 4 = 108194.75
INFO flwr 2023-07-23 17:18:44,190 | fed_df.py:194 | Number of selected crops : 13330
DEBUG flwr 2023-07-23 17:18:47,639 | server.py:215 | fit_round 4: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3170086)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3170204)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:20:08,351 | server.py:229 | fit_round 4 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3170476)[0m malloc_consolidate(): invalid chunk size
[W] [17:18:44.333205] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3170086)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=3170204)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=3170336)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=3170474)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=3170476)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=3170478)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=3170477)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=3170475)[0m Fitting Client 6
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3170477)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3170478)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3170336)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3170474)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3170475)[0m malloc_consolidate(): invalid chunk size
E0723 17:20:13.562640518 3092704 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 240000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.025976055124774574, val accuracy : 0.54242, best val accuracy : 0.5594
Average local training loss : 6.419203334487974
Average local training accuracy : 0.6341972222222222
INFO flwr 2023-07-23 17:21:13,248 | server.py:116 | fit progress: (4, 1.342800372314453, {'server_test_acc': 0.5558}, 637.25712621602)
INFO flwr 2023-07-23 17:21:13,248 | server.py:163 | evaluate_round 4: no clients selected, cancel
Cluster score for round 5 = 101682.234375
INFO flwr 2023-07-23 17:21:22,078 | fed_df.py:194 | Number of selected crops : 16011
DEBUG flwr 2023-07-23 17:21:25,910 | server.py:215 | fit_round 5: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3441284)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3441283)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3441302)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3441305)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3441306)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:22:47,174 | server.py:229 | fit_round 5 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3441301)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3441571)[0m malloc_consolidate(): invalid chunk size
[W] [17:21:22.251889] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3441284)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=3441283)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=3441302)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=3441305)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=3441306)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=3441573)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=3441571)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3441301)[0m Fitting Client 15
Warm start at round 5
Performing server side distillation training...
E0723 17:22:48.434825512 3359465 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 480000ms
[2m[36m(launch_and_fit pid=3441573)[0m malloc_consolidate(): invalid chunk size
E0723 17:23:08.969927854 3645833 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 960000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.027129584128037097, val accuracy : 0.60192, best val accuracy : 0.6146
Average local training loss : 6.081029591709375
Average local training accuracy : 0.6693388888888889
INFO flwr 2023-07-23 17:23:47,684 | server.py:116 | fit progress: (5, 1.2899388153076172, {'server_test_acc': 0.6023}, 791.6933979369933)
INFO flwr 2023-07-23 17:23:47,685 | server.py:163 | evaluate_round 5: no clients selected, cancel
Cluster score for round 6 = 32553.21875
INFO flwr 2023-07-23 17:23:56,461 | fed_df.py:194 | Number of selected crops : 15035
DEBUG flwr 2023-07-23 17:24:00,307 | server.py:215 | fit_round 6: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3702935)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3703072)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3703473)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:25:21,114 | server.py:229 | fit_round 6 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3703340)[0m malloc_consolidate(): invalid chunk size
[W] [17:23:56.636425] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3703072)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=3702935)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=3702937)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3703337)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=3703340)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=3703473)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=3703474)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=3703475)[0m Fitting Client 9
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3703474)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3703475)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3702937)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3703337)[0m malloc_consolidate(): invalid chunk size
E0723 17:25:23.240604975 3880374 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 1920000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.005336638797074556, val accuracy : 0.61792, best val accuracy : 0.6284
Average local training loss : 4.814652304165065
Average local training accuracy : 0.8061236111111112
INFO flwr 2023-07-23 17:26:21,321 | server.py:116 | fit progress: (6, 1.312792562866211, {'server_test_acc': 0.6238}, 945.3301770130056)
INFO flwr 2023-07-23 17:26:21,322 | server.py:163 | evaluate_round 6: no clients selected, cancel
Cluster score for round 7 = 24703.93359375
INFO flwr 2023-07-23 17:26:30,685 | fed_df.py:194 | Number of selected crops : 17479
DEBUG flwr 2023-07-23 17:26:34,888 | server.py:215 | fit_round 7: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3971225)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:27:56,803 | server.py:229 | fit_round 7 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3970953)[0m double free or corruption (fasttop)
[W] [17:26:30.878730] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3971367)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=3970953)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=3971059)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=3971225)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=3971357)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=3971368)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=3971366)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=3971027)[0m Fitting Client 7
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3971059)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3971367)[0m corrupted size vs. prev_size in fastbins
[2m[36m(launch_and_fit pid=3971368)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3971366)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3971027)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3971357)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.005969046780839563, val accuracy : 0.6550800000000001, best val accuracy : 0.6638
Average local training loss : 4.819608306698501
Average local training accuracy : 0.8059819444444445
INFO flwr 2023-07-23 17:28:56,890 | server.py:116 | fit progress: (7, 1.2471923309326172, {'server_test_acc': 0.6507}, 1100.8990845620283)
INFO flwr 2023-07-23 17:28:56,890 | server.py:163 | evaluate_round 7: no clients selected, cancel
Cluster score for round 8 = 21413.447265625
INFO flwr 2023-07-23 17:29:05,743 | fed_df.py:194 | Number of selected crops : 17858
DEBUG flwr 2023-07-23 17:29:09,996 | server.py:215 | fit_round 8: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=81511)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=81513)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=81514)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:30:31,165 | server.py:229 | fit_round 8 received 8 results and 0 failures
[W] [17:29:05.938031] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=81511)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=81515)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=81513)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=81512)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=81514)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=81651)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=81774)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=81772)[0m Fitting Client 14
Performing server side distillation training...
[2m[36m(launch_and_fit pid=81512)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=81774)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=81651)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=81772)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=81515)[0m malloc_consolidate(): invalid chunk size
E0723 17:30:34.755400294 2318791 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 3840000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.006217266391962767, val accuracy : 0.64124, best val accuracy : 0.6496
Average local training loss : 4.859903107769788
Average local training accuracy : 0.8027000000000001
INFO flwr 2023-07-23 17:31:30,787 | server.py:116 | fit progress: (8, 1.2853784484863282, {'server_test_acc': 0.6382}, 1254.7954364889883)
INFO flwr 2023-07-23 17:31:30,787 | server.py:163 | evaluate_round 8: no clients selected, cancel
Cluster score for round 9 = 25364.00390625
INFO flwr 2023-07-23 17:31:39,892 | fed_df.py:194 | Number of selected crops : 16313
DEBUG flwr 2023-07-23 17:31:43,796 | server.py:215 | fit_round 9: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=337927)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=337695)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=337926)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=337929)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:33:05,096 | server.py:229 | fit_round 9 received 8 results and 0 failures
[W] [17:31:40.083460] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=337695)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=337927)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=337929)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=337926)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=338394)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=338395)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=338127)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=338129)[0m Fitting Client 10
Performing server side distillation training...
[2m[36m(launch_and_fit pid=338395)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=338127)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=338394)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=338129)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.004136846031062305, val accuracy : 0.66302, best val accuracy : 0.671
Average local training loss : 4.707447366975248
Average local training accuracy : 0.8186722222222221
INFO flwr 2023-07-23 17:34:05,792 | server.py:116 | fit progress: (9, 1.1932896209716797, {'server_test_acc': 0.6621}, 1409.8013675819966)
INFO flwr 2023-07-23 17:34:05,793 | server.py:163 | evaluate_round 9: no clients selected, cancel
Cluster score for round 10 = 25622.25390625
INFO flwr 2023-07-23 17:34:15,209 | fed_df.py:194 | Number of selected crops : 17345
DEBUG flwr 2023-07-23 17:34:19,377 | server.py:215 | fit_round 10: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=602730)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:35:41,693 | server.py:229 | fit_round 10 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=602713)[0m malloc_consolidate(): invalid chunk size
[W] [17:34:15.398770] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=602411)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=602445)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=602484)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=602713)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=602446)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=602714)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=602730)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=602731)[0m Fitting Client 0
Warm start at round 10
Performing server side distillation training...
[2m[36m(launch_and_fit pid=602411)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=602714)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=602445)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=602484)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=602731)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=602446)[0m malloc_consolidate(): invalid chunk size
E0723 17:35:45.602050534  767621 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 7680000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.02070006440160796, val accuracy : 0.69128, best val accuracy : 0.7016
Average local training loss : 4.734175841137767
Average local training accuracy : 0.8155069444444444
INFO flwr 2023-07-23 17:36:42,123 | server.py:116 | fit progress: (10, 1.193321661376953, {'server_test_acc': 0.6948}, 1566.1322446829872)
INFO flwr 2023-07-23 17:36:42,124 | server.py:163 | evaluate_round 10: no clients selected, cancel
Cluster score for round 11 = 11043.015625
INFO flwr 2023-07-23 17:36:51,009 | fed_df.py:194 | Number of selected crops : 17400
DEBUG flwr 2023-07-23 17:36:55,213 | server.py:215 | fit_round 11: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=863144)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=863009)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:38:16,903 | server.py:229 | fit_round 11 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=863422)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=863421)[0m malloc_consolidate(): invalid chunk size
[W] [17:36:51.201062] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=863009)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=863144)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=863417)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=863421)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=863422)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=863398)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=863416)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=863556)[0m Fitting Client 4
Performing server side distillation training...
[2m[36m(launch_and_fit pid=863417)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=863556)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=863398)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=863416)[0m double free or corruption (fasttop)
E0723 17:38:18.275955653  767717 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 15360000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.005956661879085005, val accuracy : 0.69092, best val accuracy : 0.7066
Average local training loss : 4.231230621226132
Average local training accuracy : 0.8685458333333334
INFO flwr 2023-07-23 17:39:16,744 | server.py:116 | fit progress: (11, 1.1787913055419923, {'server_test_acc': 0.699}, 1720.7530924199964)
INFO flwr 2023-07-23 17:39:16,744 | server.py:163 | evaluate_round 11: no clients selected, cancel
Cluster score for round 12 = 13690.5390625
INFO flwr 2023-07-23 17:39:25,884 | fed_df.py:194 | Number of selected crops : 16803
DEBUG flwr 2023-07-23 17:39:29,932 | server.py:215 | fit_round 12: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1124263)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:40:50,477 | server.py:229 | fit_round 12 received 8 results and 0 failures
[W] [17:39:26.074634] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1124187)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=1124193)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=1124263)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1124194)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=1124368)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1124870)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=1124869)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1123908)[0m Fitting Client 16
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1124193)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1124187)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1124870)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1124869)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1123908)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1124194)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1124368)[0m double free or corruption (fasttop)
E0723 17:40:52.563301130 1022730 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 30720000ms
E0723 17:40:52.563431458 1022730 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 30720000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.00469892490375787, val accuracy : 0.70868, best val accuracy : 0.713
Average local training loss : 4.337874838523566
Average local training accuracy : 0.8582902777777778
INFO flwr 2023-07-23 17:41:51,767 | server.py:116 | fit progress: (12, 1.1068168395996094, {'server_test_acc': 0.705}, 1875.7760815399815)
INFO flwr 2023-07-23 17:41:51,767 | server.py:163 | evaluate_round 12: no clients selected, cancel
Cluster score for round 13 = 16446.8671875
INFO flwr 2023-07-23 17:42:00,921 | fed_df.py:194 | Number of selected crops : 16449
DEBUG flwr 2023-07-23 17:42:04,808 | server.py:215 | fit_round 13: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1404521)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1405196)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1405198)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:43:27,203 | server.py:229 | fit_round 13 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1405395)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1404773)[0m malloc_consolidate(): invalid chunk size
[W] [17:42:01.105834] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1404789)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=1404521)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=1404773)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=1405198)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=1405393)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1405395)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=1405394)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1405196)[0m Fitting Client 19
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1404789)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1405393)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1405394)[0m malloc_consolidate(): invalid chunk size
E0723 17:43:30.472372297 1278317 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 61440000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.005022984427865595, val accuracy : 0.6921199999999998, best val accuracy : 0.6986
Average local training loss : 4.165913909487426
Average local training accuracy : 0.8724152777777778
INFO flwr 2023-07-23 17:44:29,142 | server.py:116 | fit progress: (13, 1.1580242950439452, {'server_test_acc': 0.6903}, 2033.1504509900114)
INFO flwr 2023-07-23 17:44:29,142 | server.py:163 | evaluate_round 13: no clients selected, cancel
Cluster score for round 14 = 16503.93359375
INFO flwr 2023-07-23 17:44:38,314 | fed_df.py:194 | Number of selected crops : 15698
DEBUG flwr 2023-07-23 17:44:42,117 | server.py:215 | fit_round 14: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1695608)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1695606)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:46:04,414 | server.py:229 | fit_round 14 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1695217)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1695607)[0m malloc_consolidate(): invalid chunk size
[W] [17:44:38.487410] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1695217)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=1695216)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=1695195)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=1695321)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=1695323)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=1695608)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=1695606)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=1695607)[0m Fitting Client 11
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1695323)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1695195)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1695216)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1695321)[0m malloc_consolidate(): invalid chunk size
E0723 17:46:07.872032051 1839489 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 122880000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.0036176829412579536, val accuracy : 0.70202, best val accuracy : 0.7086
Average local training loss : 4.1940181029960515
Average local training accuracy : 0.8701013888888889
INFO flwr 2023-07-23 17:47:09,288 | server.py:116 | fit progress: (14, 1.1305047119140625, {'server_test_acc': 0.7002}, 2193.29713950702)
INFO flwr 2023-07-23 17:47:09,288 | server.py:163 | evaluate_round 14: no clients selected, cancel
Cluster score for round 15 = 17023.306640625
INFO flwr 2023-07-23 17:47:18,322 | fed_df.py:194 | Number of selected crops : 16233
DEBUG flwr 2023-07-23 17:47:22,253 | server.py:215 | fit_round 15: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1966763)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1966768)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1966770)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:48:42,323 | server.py:229 | fit_round 15 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1966840)[0m malloc_consolidate(): invalid chunk size
[W] [17:47:18.498362] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1966763)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=1966768)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=1966771)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=1966770)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=1966769)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=1966840)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=1966841)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1966839)[0m Fitting Client 16
Warm start at round 15
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1966841)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1966839)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1966771)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1966769)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.02141650692932308, val accuracy : 0.70518, best val accuracy : 0.7188
Average local training loss : 4.129142442159354
Average local training accuracy : 0.8738388888888888
INFO flwr 2023-07-23 17:49:46,319 | server.py:116 | fit progress: (15, 1.2204719207763672, {'server_test_acc': 0.7083}, 2350.3275022049784)
INFO flwr 2023-07-23 17:49:46,319 | server.py:163 | evaluate_round 15: no clients selected, cancel
Cluster score for round 16 = 10201.076171875
INFO flwr 2023-07-23 17:49:55,185 | fed_df.py:194 | Number of selected crops : 17210
DEBUG flwr 2023-07-23 17:49:59,314 | server.py:215 | fit_round 16: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2227039)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 17:51:20,033 | server.py:229 | fit_round 16 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2227037)[0m malloc_consolidate(): invalid chunk size
[W] [17:49:55.370167] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2227039)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2227038)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=2227107)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=2227176)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=2227177)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2227036)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=2227037)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=2227108)[0m Fitting Client 10
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2227177)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2227036)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2227107)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2227038)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2227176)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2227108)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.006639275808818638, val accuracy : 0.68486, best val accuracy : 0.6982
Average local training loss : 3.832759492471814
Average local training accuracy : 0.9042000000000001
INFO flwr 2023-07-23 17:52:21,935 | server.py:116 | fit progress: (16, 1.2001455688476563, {'server_test_acc': 0.6902}, 2505.9436180799967)
INFO flwr 2023-07-23 17:52:21,935 | server.py:163 | evaluate_round 16: no clients selected, cancel
Cluster score for round 17 = 11877.3779296875
INFO flwr 2023-07-23 17:52:30,783 | fed_df.py:194 | Number of selected crops : 17002
DEBUG flwr 2023-07-23 17:52:34,975 | server.py:215 | fit_round 17: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2486678)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2486747)[0m corrupted size vs. prev_size in fastbins
[2m[36m(launch_and_fit pid=2487022)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:53:55,515 | server.py:229 | fit_round 17 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2486885)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2486961)[0m double free or corruption (fasttop)
[W] [17:52:30.978743] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2486678)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=2486747)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=2486816)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=2486885)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2486884)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=2487022)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2486961)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=2486953)[0m Fitting Client 15
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2486816)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2486953)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2486953)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2486884)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.005977598078083247, val accuracy : 0.7197800000000001, best val accuracy : 0.7248
Average local training loss : 3.9842418601736425
Average local training accuracy : 0.891461111111111
INFO flwr 2023-07-23 17:54:57,570 | server.py:116 | fit progress: (17, 1.1058174591064454, {'server_test_acc': 0.7216}, 2661.5787447009934)
INFO flwr 2023-07-23 17:54:57,570 | server.py:163 | evaluate_round 17: no clients selected, cancel
Cluster score for round 18 = 14893.2265625
INFO flwr 2023-07-23 17:55:06,549 | fed_df.py:194 | Number of selected crops : 16088
DEBUG flwr 2023-07-23 17:55:10,456 | server.py:215 | fit_round 18: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=2746424)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2746426)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:56:30,489 | server.py:229 | fit_round 18 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2746422)[0m malloc_consolidate(): invalid chunk size
[W] [17:55:06.719127] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=2746422)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=2746424)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=2746426)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2746428)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=2746429)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=2746497)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2746498)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=2746499)[0m Fitting Client 1
Performing server side distillation training...
[2m[36m(launch_and_fit pid=2746499)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2746497)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2746428)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=2746429)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=2746498)[0m malloc_consolidate(): invalid chunk size
E0723 17:56:33.819310152 2361973 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 245760000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.004290175565518439, val accuracy : 0.7251200000000001, best val accuracy : 0.7284
Average local training loss : 3.9154956143349406
Average local training accuracy : 0.8965222222222222
INFO flwr 2023-07-23 17:57:33,368 | server.py:116 | fit progress: (18, 1.0613232055664064, {'server_test_acc': 0.7225}, 2817.3768385620206)
INFO flwr 2023-07-23 17:57:33,368 | server.py:163 | evaluate_round 18: no clients selected, cancel
Cluster score for round 19 = 15717.826171875
INFO flwr 2023-07-23 17:57:42,679 | fed_df.py:194 | Number of selected crops : 16310
DEBUG flwr 2023-07-23 17:57:46,572 | server.py:215 | fit_round 19: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3040986)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3040739)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3040987)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3040917)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 17:59:07,612 | server.py:229 | fit_round 19 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3040738)[0m malloc_consolidate(): invalid chunk size
[W] [17:57:42.856899] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3040739)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=3040772)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=3040738)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=3040751)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=3040985)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=3040917)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=3040987)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=3040986)[0m Fitting Client 8
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3040772)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3040985)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.005398416311945767, val accuracy : 0.72334, best val accuracy : 0.7298
Average local training loss : 3.9525855068117384
Average local training accuracy : 0.8935875000000001
INFO flwr 2023-07-23 18:00:10,721 | server.py:116 | fit progress: (19, 1.0635277801513672, {'server_test_acc': 0.7208}, 2974.730343240022)
INFO flwr 2023-07-23 18:00:10,722 | server.py:163 | evaluate_round 19: no clients selected, cancel
Cluster score for round 20 = 18098.0703125
INFO flwr 2023-07-23 18:00:19,662 | fed_df.py:194 | Number of selected crops : 15831
DEBUG flwr 2023-07-23 18:00:23,526 | server.py:215 | fit_round 20: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3312349)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:01:43,588 | server.py:229 | fit_round 20 received 8 results and 0 failures
[W] [18:00:19.844446] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3312349)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=3312351)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=3312356)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=3312491)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=3312489)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=3312488)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=3312490)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=3312626)[0m Fitting Client 7
Warm start at round 20
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3312351)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3312488)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3312491)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3312490)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3312356)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3312626)[0m malloc_consolidate(): invalid chunk size
E0723 18:01:45.962100892 3454272 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 491520000ms
[2m[36m(launch_and_fit pid=3312489)[0m malloc_consolidate(): invalid chunk size
E0723 18:02:25.401133694 3532162 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 983040000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.033379349935799836, val accuracy : 0.7343799999999999, best val accuracy : 0.7444
Average local training loss : 3.9967182535678147
Average local training accuracy : 0.8898597222222222
INFO flwr 2023-07-23 18:02:47,899 | server.py:116 | fit progress: (20, 1.0002421325683595, {'server_test_acc': 0.7404}, 3131.907865897985)
INFO flwr 2023-07-23 18:02:47,899 | server.py:163 | evaluate_round 20: no clients selected, cancel
Cluster score for round 21 = 22344.953125
INFO flwr 2023-07-23 18:02:56,763 | fed_df.py:194 | Number of selected crops : 14899
DEBUG flwr 2023-07-23 18:03:00,636 | server.py:215 | fit_round 21: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3574219)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 18:04:21,252 | server.py:229 | fit_round 21 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3574220)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3574291)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3574290)[0m corrupted size vs. prev_size in fastbins
[2m[36m(launch_and_fit pid=3574427)[0m malloc_consolidate(): invalid chunk size
[W] [18:02:56.937945] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3574217)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=3574219)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=3574220)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=3574290)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=3574359)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=3574291)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3574427)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=3574428)[0m Fitting Client 15
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3574217)[0m malloc_consolidate(): invalid chunk size
E0723 18:04:22.179566826 3533560 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 1966080000ms
[2m[36m(launch_and_fit pid=3574359)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3574428)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.007044750197790563, val accuracy : 0.7033400000000001, best val accuracy : 0.7088
Average local training loss : 3.662007796019316
Average local training accuracy : 0.9171000000000001
INFO flwr 2023-07-23 18:05:24,254 | server.py:116 | fit progress: (21, 1.0380941009521485, {'server_test_acc': 0.7096}, 3288.262650338991)
INFO flwr 2023-07-23 18:05:24,254 | server.py:163 | evaluate_round 21: no clients selected, cancel
Cluster score for round 22 = 21878.630859375
INFO flwr 2023-07-23 18:05:33,271 | fed_df.py:194 | Number of selected crops : 14263
DEBUG flwr 2023-07-23 18:05:37,165 | server.py:215 | fit_round 22: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=3837000)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3837208)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:06:57,217 | server.py:229 | fit_round 22 received 8 results and 0 failures
[W] [18:05:33.439510] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=3837000)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=3837068)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=3837139)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=3837070)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=3837208)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=3837277)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=3837276)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=3837207)[0m Fitting Client 12
Performing server side distillation training...
[2m[36m(launch_and_fit pid=3837276)[0m malloc_consolidate(): invalid chunk size
E0723 18:06:58.123035509 3724183 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=3837070)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3837068)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3837139)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=3837277)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=3837207)[0m malloc_consolidate(): invalid chunk size
Distillation training stopped at step number : 500
Average fusion training loss : 0.006829798712860793, val accuracy : 0.7373199999999999, best val accuracy : 0.7452
Average local training loss : 3.7979355629533527
Average local training accuracy : 0.9053666666666667
INFO flwr 2023-07-23 18:08:03,291 | server.py:116 | fit progress: (22, 0.9654372772216797, {'server_test_acc': 0.7282}, 3447.2998874619952)
INFO flwr 2023-07-23 18:08:03,291 | server.py:163 | evaluate_round 22: no clients selected, cancel
Cluster score for round 23 = 25829.796875
INFO flwr 2023-07-23 18:08:12,430 | fed_df.py:194 | Number of selected crops : 13364
DEBUG flwr 2023-07-23 18:08:15,942 | server.py:215 | fit_round 23: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-07-23 18:09:36,491 | server.py:229 | fit_round 23 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=4103009)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4103011)[0m malloc_consolidate(): invalid chunk size
[W] [18:08:12.580972] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=4103009)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=4103012)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=4103006)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=4103007)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=4103011)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=4103005)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=4103010)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=4103008)[0m Fitting Client 6
Performing server side distillation training...
[2m[36m(launch_and_fit pid=4103010)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4103006)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4103012)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4103007)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=4103005)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=4103008)[0m malloc_consolidate(): invalid chunk size
E0723 18:09:41.813357998 3991858 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:10:06.536636243  122371 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.004786791433114558, val accuracy : 0.7337999999999999, best val accuracy : 0.7406
Average local training loss : 3.823193828016519
Average local training accuracy : 0.9039222222222223
INFO flwr 2023-07-23 18:10:42,395 | server.py:116 | fit progress: (23, 0.9427778015136719, {'server_test_acc': 0.7334}, 3606.4037375539774)
INFO flwr 2023-07-23 18:10:42,395 | server.py:163 | evaluate_round 23: no clients selected, cancel
Cluster score for round 24 = 30545.1796875
INFO flwr 2023-07-23 18:10:51,387 | fed_df.py:194 | Number of selected crops : 12805
DEBUG flwr 2023-07-23 18:10:54,757 | server.py:215 | fit_round 24: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=177151)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=177187)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:12:16,034 | server.py:229 | fit_round 24 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=177173)[0m malloc_consolidate(): invalid chunk size
[W] [18:10:51.532564] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=177151)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=177189)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=177187)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=177173)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=177200)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=177186)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=177188)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=177185)[0m Fitting Client 7
Performing server side distillation training...
[2m[36m(launch_and_fit pid=177200)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=177188)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=177189)[0m double free or corruption (fasttop)
E0723 18:12:17.582536565  347067 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=177185)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=177186)[0m double free or corruption (fasttop)
Distillation training stopped at step number : 500
Average fusion training loss : 0.00898407708760351, val accuracy : 0.7142999999999999, best val accuracy : 0.7246
Average local training loss : 3.7297647651284933
Average local training accuracy : 0.9088069444444444
INFO flwr 2023-07-23 18:13:23,310 | server.py:116 | fit progress: (24, 1.0302177001953126, {'server_test_acc': 0.7128}, 3767.3191902239923)
INFO flwr 2023-07-23 18:13:23,311 | server.py:163 | evaluate_round 24: no clients selected, cancel
Cluster score for round 25 = 31164.818359375
INFO flwr 2023-07-23 18:13:32,207 | fed_df.py:194 | Number of selected crops : 12898
DEBUG flwr 2023-07-23 18:13:35,609 | server.py:215 | fit_round 25: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=486054)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=486083)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 18:14:58,107 | server.py:229 | fit_round 25 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=486301)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=486300)[0m malloc_consolidate(): invalid chunk size
[W] [18:13:32.360482] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=486054)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=486083)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=486232)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=486162)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=486231)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=486301)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=486300)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=486164)[0m Fitting Client 17
Warm start at round 25
Performing server side distillation training...
[2m[36m(launch_and_fit pid=486231)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=486162)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=486232)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=486164)[0m malloc_consolidate(): invalid chunk size
E0723 18:15:01.316183888 4036107 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.03428408784046769, val accuracy : 0.70838, best val accuracy : 0.7294
Average local training loss : 3.7819100493565205
Average local training accuracy : 0.9050194444444445
INFO flwr 2023-07-23 18:16:06,041 | server.py:116 | fit progress: (25, 1.0473867980957032, {'server_test_acc': 0.7208}, 3930.0498722820194)
INFO flwr 2023-07-23 18:16:06,041 | server.py:163 | evaluate_round 25: no clients selected, cancel
Cluster score for round 26 = 11831.3515625
INFO flwr 2023-07-23 18:16:15,114 | fed_df.py:194 | Number of selected crops : 13631
DEBUG flwr 2023-07-23 18:16:18,641 | server.py:215 | fit_round 26: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=751357)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=751362)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:17:42,073 | server.py:229 | fit_round 26 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=751366)[0m malloc_consolidate(): invalid chunk size
[W] [18:16:15.264373] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=751355)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=751357)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=751362)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=751368)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=751379)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=751380)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=751366)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=751365)[0m Fitting Client 17
Performing server side distillation training...
[2m[36m(launch_and_fit pid=751379)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=751380)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=751380)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=751355)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=751368)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=751365)[0m double free or corruption (fasttop)
E0723 18:17:44.918271631  937483 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
E0723 18:18:43.124590053  938612 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.008020797450095415, val accuracy : 0.7279399999999999, best val accuracy : 0.7362
Average local training loss : 3.6242920607328415
Average local training accuracy : 0.9202180555555556
INFO flwr 2023-07-23 18:18:47,089 | server.py:116 | fit progress: (26, 0.9727179016113281, {'server_test_acc': 0.7309}, 4091.09791289398)
INFO flwr 2023-07-23 18:18:47,089 | server.py:163 | evaluate_round 26: no clients selected, cancel
Cluster score for round 27 = 13932.640625
INFO flwr 2023-07-23 18:18:55,914 | fed_df.py:194 | Number of selected crops : 14189
DEBUG flwr 2023-07-23 18:18:59,534 | server.py:215 | fit_round 27: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-07-23 18:20:21,644 | server.py:229 | fit_round 27 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1013773)[0m malloc_consolidate(): invalid chunk size
[W] [18:18:56.076180] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1013776)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=1013773)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1013774)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=1013986)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1013908)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=1014116)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=1014174)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=1014042)[0m Fitting Client 14
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1013774)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1013776)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1013986)[0m malloc_consolidate(): invalid chunk size
E0723 18:20:23.426329760 1007235 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=1014116)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1013908)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1014174)[0m malloc_consolidate(): invalid chunk size
E0723 18:21:23.881505558 1269466 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.007992476366925984, val accuracy : 0.7535200000000001, best val accuracy : 0.76
Average local training loss : 3.6563771292567253
Average local training accuracy : 0.9184749999999999
INFO flwr 2023-07-23 18:21:26,192 | server.py:116 | fit progress: (27, 0.9346045135498047, {'server_test_acc': 0.7426}, 4250.200676455977)
INFO flwr 2023-07-23 18:21:26,192 | server.py:163 | evaluate_round 27: no clients selected, cancel
Cluster score for round 28 = 16009.125
INFO flwr 2023-07-23 18:21:35,293 | fed_df.py:194 | Number of selected crops : 13594
DEBUG flwr 2023-07-23 18:21:38,816 | server.py:215 | fit_round 28: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1279926)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:23:00,401 | server.py:229 | fit_round 28 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1279927)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1280199)[0m malloc_consolidate(): invalid chunk size
[W] [18:21:35.444695] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1279926)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=1279551)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1279927)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=1279928)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=1280065)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=1279929)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=1280199)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=1280066)[0m Fitting Client 4
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1280065)[0m malloc_consolidate(): invalid chunk size
E0723 18:23:01.219911201 1270280 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
[2m[36m(launch_and_fit pid=1279551)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1279928)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1280066)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1279929)[0m double free or corruption (fasttop)
Distillation training stopped at step number : 500
Average fusion training loss : 0.005572357377503067, val accuracy : 0.74534, best val accuracy : 0.7486
Average local training loss : 3.663808036409318
Average local training accuracy : 0.9167097222222221
INFO flwr 2023-07-23 18:24:05,127 | server.py:116 | fit progress: (28, 0.9744183410644531, {'server_test_acc': 0.7421}, 4409.135562107025)
INFO flwr 2023-07-23 18:24:05,127 | server.py:163 | evaluate_round 28: no clients selected, cancel
Cluster score for round 29 = 20413.068359375
INFO flwr 2023-07-23 18:24:14,365 | fed_df.py:194 | Number of selected crops : 12810
DEBUG flwr 2023-07-23 18:24:17,766 | server.py:215 | fit_round 29: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1551198)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1551596)[0m malloc_consolidate(): invalid chunk size
DEBUG flwr 2023-07-23 18:25:40,519 | server.py:229 | fit_round 29 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1551597)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1551606)[0m malloc_consolidate(): invalid chunk size
[W] [18:24:14.507105] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1551198)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=1551596)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=1551598)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=1551597)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=1551606)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1551628)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=1551627)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=1551529)[0m Fitting Client 18
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1551628)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1551598)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1551529)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1551627)[0m double free or corruption (fasttop)
E0723 18:25:46.049501172 1737146 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.0046991398697718975, val accuracy : 0.7415999999999999, best val accuracy : 0.748
Average local training loss : 3.5743768902495505
Average local training accuracy : 0.9223388888888889
INFO flwr 2023-07-23 18:26:48,312 | server.py:116 | fit progress: (29, 0.9561585815429687, {'server_test_acc': 0.7422}, 4572.321220742015)
INFO flwr 2023-07-23 18:26:48,313 | server.py:163 | evaluate_round 29: no clients selected, cancel
Cluster score for round 30 = 22534.26171875
INFO flwr 2023-07-23 18:26:57,343 | fed_df.py:194 | Number of selected crops : 12838
DEBUG flwr 2023-07-23 18:27:00,772 | server.py:215 | fit_round 30: strategy sampled 8 clients (out of 20)
[2m[36m(launch_and_fit pid=1795023)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1795028)[0m double free or corruption (fasttop)
DEBUG flwr 2023-07-23 18:28:38,448 | server.py:229 | fit_round 30 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1795021)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1795033)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1795029)[0m double free or corruption (fasttop)
[W] [18:26:57.490853] # of Nearest Neighbors should be at least 3 * perplexity. Your results might be a bit strange...
[2m[36m(launch_and_fit pid=1795023)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=1795028)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1795033)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=1795030)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=1795032)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=1795021)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=1795029)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=1795031)[0m Fitting Client 8
Warm start at round 30
Performing server side distillation training...
[2m[36m(launch_and_fit pid=1795031)[0m double free or corruption (fasttop)
[2m[36m(launch_and_fit pid=1795030)[0m malloc_consolidate(): invalid chunk size
[2m[36m(launch_and_fit pid=1795032)[0m double free or corruption (fasttop)
E0723 18:29:40.160840891 1958280 chttp2_transport.cc:1079]             ipv4:145.136.62.6:47699: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): ∞
Distillation training stopped at step number : 500
Average fusion training loss : 0.02831240141764283, val accuracy : 0.74218, best val accuracy : 0.7548
Average local training loss : 3.603510015271604
Average local training accuracy : 0.9209430555555556
INFO flwr 2023-07-23 18:29:44,118 | server.py:116 | fit progress: (30, 1.0353385559082031, {'server_test_acc': 0.7441}, 4748.127048126014)
INFO flwr 2023-07-23 18:29:44,118 | server.py:163 | evaluate_round 30: no clients selected, cancel
INFO flwr 2023-07-23 18:29:44,118 | server.py:144 | FL finished in 4748.127454961999
INFO flwr 2023-07-23 18:29:44,119 | app.py:202 | app_fit: losses_distributed []
INFO flwr 2023-07-23 18:29:44,120 | app.py:203 | app_fit: metrics_distributed {}
INFO flwr 2023-07-23 18:29:44,120 | app.py:204 | app_fit: losses_centralized [(0, 2.3234217651367186), (1, 2.372212274169922), (2, 1.4725686431884766), (3, 1.4482104736328125), (4, 1.342800372314453), (5, 1.2899388153076172), (6, 1.312792562866211), (7, 1.2471923309326172), (8, 1.2853784484863282), (9, 1.1932896209716797), (10, 1.193321661376953), (11, 1.1787913055419923), (12, 1.1068168395996094), (13, 1.1580242950439452), (14, 1.1305047119140625), (15, 1.2204719207763672), (16, 1.2001455688476563), (17, 1.1058174591064454), (18, 1.0613232055664064), (19, 1.0635277801513672), (20, 1.0002421325683595), (21, 1.0380941009521485), (22, 0.9654372772216797), (23, 0.9427778015136719), (24, 1.0302177001953126), (25, 1.0473867980957032), (26, 0.9727179016113281), (27, 0.9346045135498047), (28, 0.9744183410644531), (29, 0.9561585815429687), (30, 1.0353385559082031)]
INFO flwr 2023-07-23 18:29:44,120 | app.py:205 | app_fit: metrics_centralized {'server_test_acc': [(0, 0.108), (1, 0.4024), (2, 0.5014), (3, 0.5337), (4, 0.5558), (5, 0.6023), (6, 0.6238), (7, 0.6507), (8, 0.6382), (9, 0.6621), (10, 0.6948), (11, 0.699), (12, 0.705), (13, 0.6903), (14, 0.7002), (15, 0.7083), (16, 0.6902), (17, 0.7216), (18, 0.7225), (19, 0.7208), (20, 0.7404), (21, 0.7096), (22, 0.7282), (23, 0.7334), (24, 0.7128), (25, 0.7208), (26, 0.7309), (27, 0.7426), (28, 0.7421), (29, 0.7422), (30, 0.7441)]}
malloc_consolidate(): invalid chunk size
srun: error: gcn6: task 0: Aborted
srun: Terminating StepId=3126855.1
-----EXPERIMENT ENDS-----
-----CLEANING UP DISK------
-----END-----

JOB STATISTICS
==============
Job ID: 3126855
Cluster: snellius
User/Group: sunnys/sunnys
State: RUNNING
Nodes: 1
Cores per node: 18
CPU Utilized: 02:47:29
CPU Efficiency: 11.30% of 1-00:42:36 core-walltime
Job Wall-clock time: 01:22:22
Memory Utilized: 74.28 GB
Memory Efficiency: 61.90% of 120.00 GB
WARNING: Efficiency statistics may be misleading for RUNNING jobs.
