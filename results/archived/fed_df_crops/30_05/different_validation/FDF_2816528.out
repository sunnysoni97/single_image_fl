-----BEGIN-----
-----SETTINGS-----
STRATEGY:feddf
MODEL_NAME:resnet8
NUM_CLIENTS:20
NUM_ROUNDS:10
FRACTION_FIT:0.4
FRACTION_EVALUATE:0.0
DATASET_NAME:cifar10
PARTITION_ALPHA:1.0
PARTITION_VAL_RATIO:0.1
BATCH_SIZE:1024
LOCAL_EPOCHS:80
LOCAL_LR:0.05
DISTILL_BATCH_SIZE:1024
SERVER_LR:0.005
SERVER_STEPS:500
SERVER_EARLY_STEPS:1000
USE_EARLY_STOPPING:False
USE_ADAPTIVE_LR:False
SEED:42
CUDA_DETERMINISTIC:False
USE_CROPS:True
IMG_NAME:ameyoko.jpg
DISTILL_DATASET:cifar100
DISTILL_ALPHA:1.0
NUM_DISTILL_IMAGES:2250
WARM_START:False
WARM_START_ROUNDS:5
WARM_START_INTERVAL:5
DEBUG:False
-----SETTINGS END-----
-----EXPERIMENT BEGINS-----
---------
Generating crops for FedDF
Namespace(img_size=32, batch_size=32, num_imgs=2250, threads=12, vflip=False, deg=30, shear=30, cropfirst=True, initcrop=0.5, scale=[500, 1], randinterp=False, debug=False, imgpath='./static/single_images/ameyoko.jpg', targetpath='/scratch-local/sunnys.2816528', seed=42, img_per_thread=187)
will save 2250 patches in /scratch-local/sunnys.2816528/single_img_crops/crops
2250 took 0.04min with 12 threads
---------
Simulating feddf training
INFO flwr 2023-05-30 12:38:32,146 | app.py:145 | Starting Flower simulation, config: ServerConfig(num_rounds=10, round_timeout=None)
2023-05-30 12:38:34,608	INFO worker.py:1529 -- Started a local Ray instance. View the dashboard at [1m[32m127.0.0.1:8265 [39m[22m
INFO flwr 2023-05-30 12:38:38,543 | app.py:179 | Flower VCE: Ray initialized with resources: {'memory': 344654751540.0, 'CPU': 72.0, 'accelerator_type:A100': 1.0, 'object_store_memory': 151994893516.0, 'GPU': 1.0, 'node:145.136.62.22': 1.0}
INFO flwr 2023-05-30 12:38:38,544 | server.py:86 | Initializing global parameters
INFO flwr 2023-05-30 12:38:38,544 | server.py:266 | Using initial parameters provided by strategy
INFO flwr 2023-05-30 12:38:38,544 | server.py:88 | Evaluating initial parameters
Downloading https://www.cs.toronto.edu/~kriz/cifar-10-python.tar.gz to /scratch-local/sunnys.2816528/cifar-10-python.tar.gz
Extracting /scratch-local/sunnys.2816528/cifar-10-python.tar.gz to /scratch-local/sunnys.2816528
Generating unified cifar10 dataset
Class histogram for 0-th partition (alpha=1.0, 10 classes): [440 381 415  39  10 257 227 532  17 182]
INFO flwr 2023-05-30 12:38:43,389 | server.py:91 | initial parameters (loss, other metrics): 2.323421728515625, {'server_test_acc': 0.108}
INFO flwr 2023-05-30 12:38:43,389 | server.py:101 | FL starting
DEBUG flwr 2023-05-30 12:38:43,389 | server.py:215 | fit_round 1: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:39:38,186 | server.py:229 | fit_round 1 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1954623)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=1954620)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=1954616)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=1954621)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1954617)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=1954619)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=1954622)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=1954618)[0m Fitting Client 3
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.0645676553659141, val accuracy : 0.42108, best val accuracy : 0.462
Average local training loss : 3.667469868250191
Average local training accuracy : 0.5683048611111111
INFO flwr 2023-05-30 12:40:16,933 | server.py:116 | fit progress: (1, 1.4895641479492188, {'server_test_acc': 0.4477}, 93.54372844193131)
INFO flwr 2023-05-30 12:40:16,933 | server.py:163 | evaluate_round 1: no clients selected, cancel
DEBUG flwr 2023-05-30 12:40:16,933 | server.py:215 | fit_round 2: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:41:10,517 | server.py:229 | fit_round 2 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2076580)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2076581)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=2076582)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=2076576)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=2076574)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=2076578)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=2076579)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=2076577)[0m Fitting Client 18
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.027132312923669816, val accuracy : 0.34662000000000004, best val accuracy : 0.3554
Average local training loss : 3.6073877443559472
Average local training accuracy : 0.5769722222222222
INFO flwr 2023-05-30 12:41:49,380 | server.py:116 | fit progress: (2, 2.2962765625, {'server_test_acc': 0.3593}, 185.99088525096886)
INFO flwr 2023-05-30 12:41:49,380 | server.py:163 | evaluate_round 2: no clients selected, cancel
DEBUG flwr 2023-05-30 12:41:49,380 | server.py:215 | fit_round 3: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:42:45,285 | server.py:229 | fit_round 3 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2198578)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=2198574)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=2198572)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=2198575)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=2198580)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2198579)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=2198576)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2198577)[0m Fitting Client 16
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.02101676573418081, val accuracy : 0.37392, best val accuracy : 0.3874
Average local training loss : 3.6317936457693576
Average local training accuracy : 0.5693569444444444
INFO flwr 2023-05-30 12:43:24,732 | server.py:116 | fit progress: (3, 2.582500634765625, {'server_test_acc': 0.3942}, 281.3435272279894)
INFO flwr 2023-05-30 12:43:24,733 | server.py:163 | evaluate_round 3: no clients selected, cancel
DEBUG flwr 2023-05-30 12:43:24,733 | server.py:215 | fit_round 4: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:44:18,770 | server.py:229 | fit_round 4 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2320527)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=2320526)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2320525)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=2320523)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=2320529)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=2320530)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=2320528)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2320524)[0m Fitting Client 7
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.020988370502367616, val accuracy : 0.36632000000000003, best val accuracy : 0.377
Average local training loss : 3.445648672617972
Average local training accuracy : 0.5919902777777777
INFO flwr 2023-05-30 12:44:58,600 | server.py:116 | fit progress: (4, 2.3053660400390625, {'server_test_acc': 0.3756}, 375.2114794459194)
INFO flwr 2023-05-30 12:44:58,601 | server.py:163 | evaluate_round 4: no clients selected, cancel
DEBUG flwr 2023-05-30 12:44:58,601 | server.py:215 | fit_round 5: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:45:51,234 | server.py:229 | fit_round 5 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2442663)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=2442662)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=2442666)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=2442667)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=2442668)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=2442661)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=2442665)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=2442664)[0m Fitting Client 14
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.05480922656692565, val accuracy : 0.35012, best val accuracy : 0.3846
Average local training loss : 3.7919600833207365
Average local training accuracy : 0.55484375
INFO flwr 2023-05-30 12:46:31,465 | server.py:116 | fit progress: (5, 1.7554920288085938, {'server_test_acc': 0.3867}, 468.0756600969471)
INFO flwr 2023-05-30 12:46:31,465 | server.py:163 | evaluate_round 5: no clients selected, cancel
DEBUG flwr 2023-05-30 12:46:31,465 | server.py:215 | fit_round 6: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:47:26,781 | server.py:229 | fit_round 6 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2564511)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=2564510)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2564507)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=2564506)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=2564508)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=2564509)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=2564504)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=2564505)[0m Fitting Client 14
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.06617658109590412, val accuracy : 0.35762, best val accuracy : 0.3798
Average local training loss : 2.7319556321483107
Average local training accuracy : 0.6726215277777777
INFO flwr 2023-05-30 12:48:07,263 | server.py:116 | fit progress: (6, 1.9509744140625, {'server_test_acc': 0.3778}, 563.8742499279324)
INFO flwr 2023-05-30 12:48:07,263 | server.py:163 | evaluate_round 6: no clients selected, cancel
DEBUG flwr 2023-05-30 12:48:07,263 | server.py:215 | fit_round 7: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:49:02,395 | server.py:229 | fit_round 7 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2708163)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=2708158)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=2708160)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=2708159)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=2708162)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=2708161)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=2708157)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=2708164)[0m Fitting Client 6
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.041746819198131564, val accuracy : 0.33848, best val accuracy : 0.354
Average local training loss : 2.5561192390508953
Average local training accuracy : 0.7009451388888889
INFO flwr 2023-05-30 12:49:43,213 | server.py:116 | fit progress: (7, 2.262500476074219, {'server_test_acc': 0.3469}, 659.8243983179564)
INFO flwr 2023-05-30 12:49:43,213 | server.py:163 | evaluate_round 7: no clients selected, cancel
DEBUG flwr 2023-05-30 12:49:43,214 | server.py:215 | fit_round 8: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:50:38,526 | server.py:229 | fit_round 8 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2830197)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=2830191)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=2830193)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=2830196)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=2830195)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=2830194)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=2830198)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=2830190)[0m Fitting Client 16
Performing server side distillation training...
E0530 12:51:13.871786850 2743979 chttp2_transport.cc:1079]             ipv4:145.136.62.22:57081: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 60000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.057042934181168674, val accuracy : 0.45108, best val accuracy : 0.4584
Average local training loss : 2.582310216827318
Average local training accuracy : 0.6957583333333334
INFO flwr 2023-05-30 12:51:19,068 | server.py:116 | fit progress: (8, 1.731308837890625, {'server_test_acc': 0.4517}, 755.6792789279716)
INFO flwr 2023-05-30 12:51:19,068 | server.py:163 | evaluate_round 8: no clients selected, cancel
DEBUG flwr 2023-05-30 12:51:19,068 | server.py:215 | fit_round 9: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:52:14,334 | server.py:229 | fit_round 9 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=2952198)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=2952194)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=2952196)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=2952197)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=2952195)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=2952200)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=2952192)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=2952199)[0m Fitting Client 14
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.05068900927901268, val accuracy : 0.47494, best val accuracy : 0.487
Average local training loss : 2.782812152430415
Average local training accuracy : 0.6723229166666667
INFO flwr 2023-05-30 12:52:55,003 | server.py:116 | fit progress: (9, 1.5035447143554688, {'server_test_acc': 0.4747}, 851.6138031609589)
INFO flwr 2023-05-30 12:52:55,003 | server.py:163 | evaluate_round 9: no clients selected, cancel
DEBUG flwr 2023-05-30 12:52:55,003 | server.py:215 | fit_round 10: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:53:49,090 | server.py:229 | fit_round 10 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=3074339)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=3074344)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=3074341)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=3074345)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=3074347)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=3074343)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=3074346)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=3074342)[0m Fitting Client 0
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.06353838064707816, val accuracy : 0.5147600000000001, best val accuracy : 0.526
Average local training loss : 2.454013758245855
Average local training accuracy : 0.7133541666666667
INFO flwr 2023-05-30 12:54:30,946 | server.py:116 | fit progress: (10, 1.45649189453125, {'server_test_acc': 0.5147}, 947.5571698899148)
INFO flwr 2023-05-30 12:54:30,946 | server.py:163 | evaluate_round 10: no clients selected, cancel
INFO flwr 2023-05-30 12:54:30,946 | server.py:144 | FL finished in 947.5574149140157
INFO flwr 2023-05-30 12:54:30,947 | app.py:202 | app_fit: losses_distributed []
INFO flwr 2023-05-30 12:54:30,947 | app.py:203 | app_fit: metrics_distributed {}
INFO flwr 2023-05-30 12:54:30,947 | app.py:204 | app_fit: losses_centralized [(0, 2.323421728515625), (1, 1.4895641479492188), (2, 2.2962765625), (3, 2.582500634765625), (4, 2.3053660400390625), (5, 1.7554920288085938), (6, 1.9509744140625), (7, 2.262500476074219), (8, 1.731308837890625), (9, 1.5035447143554688), (10, 1.45649189453125)]
INFO flwr 2023-05-30 12:54:30,947 | app.py:205 | app_fit: metrics_centralized {'server_test_acc': [(0, 0.108), (1, 0.4477), (2, 0.3593), (3, 0.3942), (4, 0.3756), (5, 0.3867), (6, 0.3778), (7, 0.3469), (8, 0.4517), (9, 0.4747), (10, 0.5147)]}
-----EXPERIMENT ENDS-----
-----END-----

JOB STATISTICS
==============
Job ID: 2816528
Cluster: snellius
User/Group: sunnys/sunnys
State: RUNNING
Nodes: 1
Cores per node: 18
CPU Utilized: 00:00:31
CPU Efficiency: 0.17% of 04:59:06 core-walltime
Job Wall-clock time: 00:16:37
Memory Utilized: 1.41 MB
Memory Efficiency: 0.00% of 0.00 MB
WARNING: Efficiency statistics may be misleading for RUNNING jobs.
