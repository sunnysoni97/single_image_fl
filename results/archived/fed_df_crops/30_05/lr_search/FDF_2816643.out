-----BEGIN-----
-----SETTINGS-----
STRATEGY:feddf
MODEL_NAME:resnet8
NUM_CLIENTS:20
NUM_ROUNDS:10
FRACTION_FIT:0.4
FRACTION_EVALUATE:0.0
DATASET_NAME:cifar10
PARTITION_ALPHA:1.0
PARTITION_VAL_RATIO:0.1
BATCH_SIZE:1024
LOCAL_EPOCHS:80
LOCAL_LR:0.8
DISTILL_BATCH_SIZE:1024
SERVER_LR:0.008
SERVER_STEPS:500
SERVER_EARLY_STEPS:1000
USE_EARLY_STOPPING:False
USE_ADAPTIVE_LR:False
SEED:42
CUDA_DETERMINISTIC:False
USE_CROPS:True
IMG_NAME:ameyoko.jpg
DISTILL_DATASET:cifar100
DISTILL_ALPHA:1.0
NUM_DISTILL_IMAGES:2250
WARM_START:False
WARM_START_ROUNDS:5
WARM_START_INTERVAL:5
DEBUG:False
-----SETTINGS END-----
-----EXPERIMENT BEGINS-----
---------
Generating crops for FedDF
Namespace(img_size=32, batch_size=32, num_imgs=2250, threads=12, vflip=False, deg=30, shear=30, cropfirst=True, initcrop=0.5, scale=[500, 1], randinterp=False, debug=False, imgpath='./static/single_images/ameyoko.jpg', targetpath='/scratch-local/sunnys.2816643', seed=42, img_per_thread=187)
will save 2250 patches in /scratch-local/sunnys.2816643/single_img_crops/crops
2250 took 0.04min with 12 threads
---------
Simulating feddf training
INFO flwr 2023-05-30 12:52:06,402 | app.py:145 | Starting Flower simulation, config: ServerConfig(num_rounds=10, round_timeout=None)
2023-05-30 12:52:08,498	INFO worker.py:1529 -- Started a local Ray instance. View the dashboard at [1m[32m127.0.0.1:8265 [39m[22m
INFO flwr 2023-05-30 12:52:12,845 | app.py:179 | Flower VCE: Ray initialized with resources: {'memory': 362319868928.0, 'node:145.136.62.54': 1.0, 'object_store_memory': 159565658112.0, 'GPU': 1.0, 'CPU': 72.0, 'accelerator_type:A100': 1.0}
INFO flwr 2023-05-30 12:52:12,845 | server.py:86 | Initializing global parameters
INFO flwr 2023-05-30 12:52:12,845 | server.py:266 | Using initial parameters provided by strategy
INFO flwr 2023-05-30 12:52:12,845 | server.py:88 | Evaluating initial parameters
Downloading https://www.cs.toronto.edu/~kriz/cifar-10-python.tar.gz to /scratch-local/sunnys.2816643/cifar-10-python.tar.gz
Extracting /scratch-local/sunnys.2816643/cifar-10-python.tar.gz to /scratch-local/sunnys.2816643
Generating unified cifar10 dataset
Class histogram for 0-th partition (alpha=1.0, 10 classes): [440 381 415  39  10 257 227 532  17 182]
INFO flwr 2023-05-30 12:52:17,357 | server.py:91 | initial parameters (loss, other metrics): 2.323421728515625, {'server_test_acc': 0.108}
INFO flwr 2023-05-30 12:52:17,357 | server.py:101 | FL starting
DEBUG flwr 2023-05-30 12:52:17,357 | server.py:215 | fit_round 1: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:53:10,114 | server.py:229 | fit_round 1 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=4169846)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=4169845)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=4169850)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=4169848)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=4169843)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=4169844)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=4169847)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=4169849)[0m Fitting Client 13
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.013822876930236816, val accuracy : 0.21534, best val accuracy : 0.2342
Average local training loss : 5.9102415362373
Average local training accuracy : 0.40324374999999996
INFO flwr 2023-05-30 12:53:46,398 | server.py:116 | fit progress: (1, 1.918931494140625, {'server_test_acc': 0.243}, 89.04172283306252)
INFO flwr 2023-05-30 12:53:46,399 | server.py:163 | evaluate_round 1: no clients selected, cancel
DEBUG flwr 2023-05-30 12:53:46,399 | server.py:215 | fit_round 2: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:54:40,476 | server.py:229 | fit_round 2 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=98820)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=98830)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=98826)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=98824)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=98827)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=98825)[0m Fitting Client 19
[2m[36m(launch_and_fit pid=98831)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=98821)[0m Fitting Client 8
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.01747355176322162, val accuracy : 0.23868, best val accuracy : 0.251
Average local training loss : 5.068346425238997
Average local training accuracy : 0.4542097222222223
INFO flwr 2023-05-30 12:55:16,841 | server.py:116 | fit progress: (2, 3.1558908203125, {'server_test_acc': 0.2548}, 179.48419831995852)
INFO flwr 2023-05-30 12:55:16,841 | server.py:163 | evaluate_round 2: no clients selected, cancel
DEBUG flwr 2023-05-30 12:55:16,841 | server.py:215 | fit_round 3: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:56:09,960 | server.py:229 | fit_round 3 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=243044)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=243049)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=243046)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=243050)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=243052)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=243048)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=243051)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=243047)[0m Fitting Client 8
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.008368365358794108, val accuracy : 0.23423999999999995, best val accuracy : 0.2472
Average local training loss : 5.715734115429223
Average local training accuracy : 0.30264097222222225
INFO flwr 2023-05-30 12:56:46,698 | server.py:116 | fit progress: (3, 2.365065881347656, {'server_test_acc': 0.2408}, 269.34119505400304)
INFO flwr 2023-05-30 12:56:46,698 | server.py:163 | evaluate_round 3: no clients selected, cancel
DEBUG flwr 2023-05-30 12:56:46,698 | server.py:215 | fit_round 4: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:57:42,661 | server.py:229 | fit_round 4 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=365046)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=365050)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=365049)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=365048)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=365051)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=365053)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=365052)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=365047)[0m Fitting Client 12
Performing server side distillation training...
E0530 12:57:57.050259780 4169146 chttp2_transport.cc:1079]             ipv4:145.136.62.54:55487: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 60000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.01766502723097801, val accuracy : 0.2284, best val accuracy : 0.2336
Average local training loss : 5.559581548720598
Average local training accuracy : 0.37370763888888886
INFO flwr 2023-05-30 12:58:18,437 | server.py:116 | fit progress: (4, 2.0101168212890625, {'server_test_acc': 0.2409}, 361.0798961550463)
INFO flwr 2023-05-30 12:58:18,437 | server.py:163 | evaluate_round 4: no clients selected, cancel
DEBUG flwr 2023-05-30 12:58:18,437 | server.py:215 | fit_round 5: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 12:59:12,389 | server.py:229 | fit_round 5 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=487060)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=487065)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=487062)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=487066)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=487068)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=487063)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=487067)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=487064)[0m Fitting Client 4
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.15796730545908214, val accuracy : 0.13828000000000001, best val accuracy : 0.1554
Average local training loss : 5.7132331630215045
Average local training accuracy : 0.3413999999999999
INFO flwr 2023-05-30 12:59:47,659 | server.py:116 | fit progress: (5, 2.503094873046875, {'server_test_acc': 0.1687}, 450.30249851499684)
INFO flwr 2023-05-30 12:59:47,659 | server.py:163 | evaluate_round 5: no clients selected, cancel
DEBUG flwr 2023-05-30 12:59:47,660 | server.py:215 | fit_round 6: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 13:00:41,067 | server.py:229 | fit_round 6 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=609392)[0m Fitting Client 18
[2m[36m(launch_and_fit pid=609399)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=609399)[0m 
[2m[36m(launch_and_fit pid=609398)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=609396)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=609393)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=609397)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=609394)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=609395)[0m Fitting Client 9
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.037876380335539576, val accuracy : 0.17362000000000002, best val accuracy : 0.1786
Average local training loss : 5.344425573386252
Average local training accuracy : 0.35342777777777773
INFO flwr 2023-05-30 13:01:16,835 | server.py:116 | fit progress: (6, 3.0672514404296876, {'server_test_acc': 0.183}, 539.4785797570366)
INFO flwr 2023-05-30 13:01:16,836 | server.py:163 | evaluate_round 6: no clients selected, cancel
DEBUG flwr 2023-05-30 13:01:16,836 | server.py:215 | fit_round 7: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 13:02:10,558 | server.py:229 | fit_round 7 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=731599)[0m Fitting Client 11
[2m[36m(launch_and_fit pid=731604)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=731602)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=731601)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=731606)[0m Fitting Client 15
[2m[36m(launch_and_fit pid=731603)[0m Fitting Client 1
[2m[36m(launch_and_fit pid=731605)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=731600)[0m Fitting Client 4
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.10448300081118941, val accuracy : 0.14114, best val accuracy : 0.1496
Average local training loss : 5.872728030756115
Average local training accuracy : 0.25265208333333333
INFO flwr 2023-05-30 13:02:46,522 | server.py:116 | fit progress: (7, 2.6161634033203125, {'server_test_acc': 0.1527}, 629.1651347379666)
INFO flwr 2023-05-30 13:02:46,522 | server.py:163 | evaluate_round 7: no clients selected, cancel
DEBUG flwr 2023-05-30 13:02:46,522 | server.py:215 | fit_round 8: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 13:03:38,594 | server.py:229 | fit_round 8 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=853892)[0m Fitting Client 4
[2m[36m(launch_and_fit pid=853899)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=853901)[0m Fitting Client 5
[2m[36m(launch_and_fit pid=853900)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=853903)[0m Fitting Client 2
[2m[36m(launch_and_fit pid=853904)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=853902)[0m Fitting Client 6
[2m[36m(launch_and_fit pid=853905)[0m Fitting Client 14
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.11657913080602884, val accuracy : 0.18104, best val accuracy : 0.1876
Average local training loss : 5.696560415439308
Average local training accuracy : 0.3262222222222222
INFO flwr 2023-05-30 13:04:14,556 | server.py:116 | fit progress: (8, 2.100225524902344, {'server_test_acc': 0.1909}, 717.199655479053)
INFO flwr 2023-05-30 13:04:14,557 | server.py:163 | evaluate_round 8: no clients selected, cancel
DEBUG flwr 2023-05-30 13:04:14,557 | server.py:215 | fit_round 9: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 13:05:08,127 | server.py:229 | fit_round 9 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=976099)[0m Fitting Client 14
[2m[36m(launch_and_fit pid=976103)[0m Fitting Client 17
[2m[36m(launch_and_fit pid=976102)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=976104)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=976098)[0m Fitting Client 16
[2m[36m(launch_and_fit pid=976100)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=976105)[0m Fitting Client 12
[2m[36m(launch_and_fit pid=976101)[0m Fitting Client 0
Performing server side distillation training...
E0530 13:05:25.882568521  470976 chttp2_transport.cc:1079]             ipv4:145.136.62.54:55487: Received a GOAWAY with error code ENHANCE_YOUR_CALM and debug data equal to "too_many_pings". Current keepalive time (before throttling): 120000ms
Distillation training stopped at step number : 500
Average fusion training loss : 0.04051769763790071, val accuracy : 0.15876, best val accuracy : 0.1618
Average local training loss : 5.560104875080288
Average local training accuracy : 0.3190090277777778
INFO flwr 2023-05-30 13:05:44,364 | server.py:116 | fit progress: (9, 2.23190703125, {'server_test_acc': 0.1681}, 807.0074031200493)
INFO flwr 2023-05-30 13:05:44,364 | server.py:163 | evaluate_round 9: no clients selected, cancel
DEBUG flwr 2023-05-30 13:05:44,364 | server.py:215 | fit_round 10: strategy sampled 8 clients (out of 20)
DEBUG flwr 2023-05-30 13:06:37,970 | server.py:229 | fit_round 10 received 8 results and 0 failures
[2m[36m(launch_and_fit pid=1098142)[0m Fitting Client 8
[2m[36m(launch_and_fit pid=1098148)[0m Fitting Client 13
[2m[36m(launch_and_fit pid=1098150)[0m Fitting Client 7
[2m[36m(launch_and_fit pid=1098151)[0m Fitting Client 0
[2m[36m(launch_and_fit pid=1098149)[0m Fitting Client 9
[2m[36m(launch_and_fit pid=1098146)[0m Fitting Client 3
[2m[36m(launch_and_fit pid=1098145)[0m Fitting Client 10
[2m[36m(launch_and_fit pid=1098147)[0m Fitting Client 2
Performing server side distillation training...
Distillation training stopped at step number : 500
Average fusion training loss : 0.4009453319013119, val accuracy : 0.0999, best val accuracy : 0.1022
Average local training loss : 5.460599154420197
Average local training accuracy : 0.3387472222222222
INFO flwr 2023-05-30 13:07:14,194 | server.py:116 | fit progress: (10, 2.422568640136719, {'server_test_acc': 0.1}, 896.8374254760565)
INFO flwr 2023-05-30 13:07:14,194 | server.py:163 | evaluate_round 10: no clients selected, cancel
INFO flwr 2023-05-30 13:07:14,194 | server.py:144 | FL finished in 896.8376831050264
INFO flwr 2023-05-30 13:07:14,195 | app.py:202 | app_fit: losses_distributed []
INFO flwr 2023-05-30 13:07:14,195 | app.py:203 | app_fit: metrics_distributed {}
INFO flwr 2023-05-30 13:07:14,195 | app.py:204 | app_fit: losses_centralized [(0, 2.323421728515625), (1, 1.918931494140625), (2, 3.1558908203125), (3, 2.365065881347656), (4, 2.0101168212890625), (5, 2.503094873046875), (6, 3.0672514404296876), (7, 2.6161634033203125), (8, 2.100225524902344), (9, 2.23190703125), (10, 2.422568640136719)]
INFO flwr 2023-05-30 13:07:14,195 | app.py:205 | app_fit: metrics_centralized {'server_test_acc': [(0, 0.108), (1, 0.243), (2, 0.2548), (3, 0.2408), (4, 0.2409), (5, 0.1687), (6, 0.183), (7, 0.1527), (8, 0.1909), (9, 0.1681), (10, 0.1)]}
-----EXPERIMENT ENDS-----
-----END-----

JOB STATISTICS
==============
Job ID: 2816643
Cluster: snellius
User/Group: sunnys/sunnys
State: COMPLETED (exit code 0)
Nodes: 1
Cores per node: 18
CPU Utilized: 00:35:35
CPU Efficiency: 12.60% of 04:42:18 core-walltime
Job Wall-clock time: 00:15:41
Memory Utilized: 24.95 GB
Memory Efficiency: 0.00% of 0.00 MB
